
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Personal AI Gateway ‚Äî Your AI Assistant in One Command">
      
      
      
        <link rel="canonical" href="https://hyunjun6928-netizen.github.io/salmalm/api/generated/">
      
      
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.3">
    
    
      
        <title>Auto-Generated API Reference - SalmAlm Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#auto-generated-api-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="SalmAlm Documentation" class="md-header__button md-logo" aria-label="SalmAlm Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SalmAlm Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Auto-Generated API Reference
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/hyunjun6928-netizen/salmalm" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    hyunjun6928-netizen/salmalm
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../beginners-guide/" class="md-tabs__link">
        
  
  
    
  
  üöÄ Ï¥àÎ≥¥Ïûê Í∞ÄÏù¥Îìú

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../getting-started/" class="md-tabs__link">
        
  
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../commands/" class="md-tabs__link">
        
  
  
    
  
  Commands

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../tools/" class="md-tabs__link">
        
  
  
    
  
  Tools

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../architecture/" class="md-tabs__link">
        
  
  
    
  
  Architecture

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../configuration/" class="md-tabs__link">
        
  
  
    
  
  Configuration

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../features/" class="md-tabs__link">
          
  
  
  Features

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../deployment/" class="md-tabs__link">
        
  
  
    
  
  Deployment

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../changelog/" class="md-tabs__link">
        
  
  
    
  
  Changelog

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="SalmAlm Documentation" class="md-nav__button md-logo" aria-label="SalmAlm Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    SalmAlm Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hyunjun6928-netizen/salmalm" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    hyunjun6928-netizen/salmalm
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beginners-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    üöÄ Ï¥àÎ≥¥Ïûê Í∞ÄÏù¥Îìú
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Commands
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tools
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Features
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../channels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Channels
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Utils
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../web/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Web
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Features
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Features
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/multi-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multi-Model Routing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/thinking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Extended Thinking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/rag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RAG & Knowledge Base
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/mcp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MCP Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/sessions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Session Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Security & Vault
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/personal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Personal Assistant
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/channels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Telegram & Discord
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/self-evolve/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Self-Evolution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/sla/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SLA & Monitoring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Changelog
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="auto-generated-api-reference">Auto-Generated API Reference<a class="headerlink" href="#auto-generated-api-reference" title="Permanent link">&para;</a></h1>
<h1 id="api">ÏûêÎèô ÏÉùÏÑ± API Î†àÌçºÎü∞Ïä§<a class="headerlink" href="#api" title="Permanent link">&para;</a></h1>
<p>Generated from source docstrings. Run <code>python docs/gen_api.py</code> to update.
ÏÜåÏä§ docstringÏóêÏÑú ÏÉùÏÑ±Îê®. <code>python docs/gen_api.py</code>Î•º Ïã§ÌñâÌïòÏó¨ ÏóÖÎç∞Ïù¥Ìä∏.</p>
<h2 id="core-core-engine-llm-session-llm">core/ ‚Äî Core ‚Äî Engine, LLM, Session / ÏΩîÏñ¥ ‚Äî ÏóîÏßÑ, LLM, ÏÑ∏ÏÖò<a class="headerlink" href="#core-core-engine-llm-session-llm" title="Permanent link">&para;</a></h2>
<h3 id="salmalmcoreaudit"><code>salmalm.core.audit</code><a class="headerlink" href="#salmalmcoreaudit" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Audit logging subsystem.</p>
</blockquote>
<ul>
<li><code>audit_log(event, detail, session_id, detail_dict)</code>
  ‚Äî Write an audit event to the security log (v1 chain + v2 structured).</li>
<li><code>audit_checkpoint()</code>
  ‚Äî Append current audit chain head hash to a checkpoint file.</li>
<li><code>query_audit_log(limit, event_type, session_id)</code>
  ‚Äî Query structured audit log entries.</li>
</ul>
<h3 id="salmalmcoreclassifier"><code>salmalm.core.classifier</code><a class="headerlink" href="#salmalmcoreclassifier" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Task classification and intent-based tool selection.</p>
</blockquote>
<h4 id="class-taskclassifier"><code>class TaskClassifier</code><a class="headerlink" href="#class-taskclassifier" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Classify user intent to determine execution strategy.</p>
</blockquote>
<ul>
<li>
<p><code>classify(cls, message, context_len)</code>
  ‚Äî Classify user message intent and determine processing tier.</p>
</li>
<li>
<p><code>classify_task(message, context_len, intents)</code>
  ‚Äî Classify user message intent and determine processing tier.</p>
</li>
<li><code>get_extra_tools(message)</code>
  ‚Äî Return extra tools based on emoji, time patterns, and question words.</li>
</ul>
<h3 id="salmalmcorecompaction"><code>salmalm.core.compaction</code><a class="headerlink" href="#salmalmcorecompaction" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Context compaction ‚Äî auto-summarize long conversations to save tokens.</p>
</blockquote>
<ul>
<li><code>compact_messages(messages, model, session, on_status)</code>
  ‚Äî Multi-stage compaction: trim tool results ‚Üí drop old tools ‚Üí summarize.</li>
<li><code>estimate_tokens(text_or_messages)</code>
  ‚Äî Estimate tokens ‚Äî accepts string or message list.</li>
<li><code>enhanced_compact(messages, target_tokens, max_tokens)</code>
  ‚Äî Enhanced compaction using importance scoring.</li>
</ul>
<h3 id="salmalmcorecore"><code>salmalm.core.core</code><a class="headerlink" href="#salmalmcorecore" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm core ‚Äî audit, cache, usage, router, compaction, search,</p>
</blockquote>
<h4 id="class-responsecache"><code>class ResponseCache</code><a class="headerlink" href="#class-responsecache" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Simple TTL cache for LLM responses to avoid duplicate calls.</p>
</blockquote>
<ul>
<li><code>get(model, messages, session_id, system_prompt, tools)</code>
  ‚Äî Get a cached response by key, or None if expired/missing.</li>
<li><code>put(model, messages, response, session_id, system_prompt)</code>
  ‚Äî Store a response in cache with TTL.</li>
</ul>
<h4 id="class-costcapexceeded"><code>class CostCapExceeded</code><a class="headerlink" href="#class-costcapexceeded" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Raised when cumulative API spend exceeds the cost cap.</p>
</blockquote>
<h4 id="class-modelrouter"><code>class ModelRouter</code><a class="headerlink" href="#class-modelrouter" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Routes queries to appropriate models based on complexity.</p>
</blockquote>
<ul>
<li><code>set_force_model(model)</code>
  ‚Äî Set and persist model preference.</li>
<li>
<p><code>route(user_message, has_tools, iteration)</code>
  ‚Äî Route a message to the best model based on intent classification.</p>
</li>
<li>
<p><code>audit_log_cleanup(days)</code>
  ‚Äî Delete audit_log_v2 entries older than <code>days</code> days.</p>
</li>
<li><code>close_all_db_connections()</code>
  ‚Äî Close all tracked SQLite connections (for graceful shutdown).</li>
<li><code>check_cost_cap()</code>
  ‚Äî Raise CostCapExceeded if cumulative cost exceeds the cap. 0 = disabled.</li>
<li><code>set_current_user_id(user_id)</code>
  ‚Äî Set the current user_id for cost tracking (thread-local).</li>
<li><code>get_current_user_id()</code>
  ‚Äî Get the current user_id from thread-local context.</li>
<li><code>track_usage(model, input_tokens, output_tokens, user_id)</code>
  ‚Äî Record token usage and cost for a model call.</li>
<li><code>get_usage_report()</code>
  ‚Äî Generate a formatted usage report with token counts and costs.</li>
<li><code>compact_session(session_id, force)</code>
  ‚Äî Compact a session's conversation by summarizing old messages.</li>
<li><code>auto_compact_if_needed(session_id)</code>
  ‚Äî Check and auto-compact session if over token threshold.</li>
<li><code>auto_title_session(session_id, first_message)</code>
  ‚Äî Generate a title from the first user message (first 50 chars, cleaned up).</li>
<li><code>write_daily_log(entry)</code>
  ‚Äî Append to today's memory log.</li>
</ul>
<h3 id="salmalmcorecore_messages"><code>salmalm.core.core_messages</code><a class="headerlink" href="#salmalmcorecore_messages" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Message operations: search, edit, delete.</p>
</blockquote>
<ul>
<li><code>edit_message(session_id, message_index, new_content)</code>
  ‚Äî Edit a message at the given index in a session.</li>
<li><code>delete_message(session_id, message_index)</code>
  ‚Äî Delete a user message and its paired assistant response.</li>
<li><code>search_messages(query, limit)</code>
  ‚Äî Search messages across all sessions using LIKE matching.</li>
</ul>
<h3 id="salmalmcorecost"><code>salmalm.core.cost</code><a class="headerlink" href="#salmalmcorecost" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Cost estimation and token counting ‚Äî single source of truth.</p>
</blockquote>
<ul>
<li><code>estimate_tokens(text)</code>
  ‚Äî Estimate tokens: Korean /2, English /4, mixed weighted.</li>
<li><code>get_pricing(model)</code>
  ‚Äî Get pricing for a model string (fuzzy match).</li>
<li><code>estimate_cost(model, usage)</code>
  ‚Äî Estimate cost in USD from usage dict.</li>
</ul>
<h3 id="salmalmcoreengine"><code>salmalm.core.engine</code><a class="headerlink" href="#salmalmcoreengine" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Intelligence Engine ‚Äî TaskClassifier + IntelligenceEngine + process_message.</p>
</blockquote>
<h4 id="class-intelligenceengine"><code>class IntelligenceEngine</code><a class="headerlink" href="#class-intelligenceengine" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Core AI reasoning engine ‚Äî surpasses OpenClaw's capabilities.</p>
</blockquote>
<ul>
<li><code>async run(session, user_message, model_override, on_tool, classification)</code>
  ‚Äî Main execution loop ‚Äî Plan ‚Üí Execute ‚Üí Reflect.</li>
</ul>
<h3 id="salmalmcoreengine_pipeline"><code>salmalm.core.engine_pipeline</code><a class="headerlink" href="#salmalmcoreengine_pipeline" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Engine message processing pipeline.</p>
</blockquote>
<ul>
<li><code>async process_message(session_id, user_message, model_override, image_data, on_tool)</code>
  ‚Äî Process a user message through the Intelligence Engine pipeline.</li>
<li><code>begin_shutdown()</code>
  ‚Äî Signal the engine to stop accepting new requests.</li>
<li><code>wait_for_active_requests(timeout)</code>
  ‚Äî Wait for active requests to complete. Returns True if all done, False if timed out.</li>
</ul>
<h3 id="salmalmcoreerror_messages"><code>salmalm.core.error_messages</code><a class="headerlink" href="#salmalmcoreerror_messages" title="Permanent link">&para;</a></h3>
<blockquote>
<p>User-friendly error messages ‚Äî bilingual KR/EN mapping.</p>
</blockquote>
<ul>
<li><code>friendly_error(exc)</code>
  ‚Äî Convert raw exception to user-friendly bilingual error message.</li>
</ul>
<h3 id="salmalmcoreerror_recovery"><code>salmalm.core.error_recovery</code><a class="headerlink" href="#salmalmcoreerror_recovery" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Error recovery and resilience ‚Äî OpenClaw-level fault tolerance.</p>
</blockquote>
<h4 id="class-errorkind"><code>class ErrorKind</code><a class="headerlink" href="#class-errorkind" title="Permanent link">&para;</a></h4>
<h4 id="class-circuitstate"><code>class CircuitState</code><a class="headerlink" href="#class-circuitstate" title="Permanent link">&para;</a></h4>
<ul>
<li><code>record_failure()</code>
  ‚Äî Record failure.</li>
<li><code>record_success()</code>
  ‚Äî Record success.</li>
<li><code>is_available()</code>
  ‚Äî Is available.</li>
</ul>
<h4 id="class-circuitbreakerregistry"><code>class CircuitBreakerRegistry</code><a class="headerlink" href="#class-circuitbreakerregistry" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Per-provider circuit breakers.</p>
</blockquote>
<ul>
<li><code>get(provider)</code>
  ‚Äî Get.</li>
<li><code>record_failure(provider)</code>
  ‚Äî Record failure.</li>
<li><code>record_success(provider)</code>
  ‚Äî Record success.</li>
<li><code>is_available(provider)</code>
  ‚Äî Is available.</li>
<li><code>status()</code>
  ‚Äî Status.</li>
</ul>
<h4 id="class-streambuffer"><code>class StreamBuffer</code><a class="headerlink" href="#class-streambuffer" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Buffer for streaming responses ‚Äî saves partial content on failure.</p>
</blockquote>
<ul>
<li><code>start(model)</code>
  ‚Äî Start.</li>
<li><code>add_chunk(text)</code>
  ‚Äî Add chunk.</li>
<li><code>set_tokens(tokens)</code>
  ‚Äî Set tokens.</li>
<li><code>content()</code>
  ‚Äî Content.</li>
<li><code>has_content()</code>
  ‚Äî Has content.</li>
<li>
<p><code>recover()</code>
  ‚Äî Recover partial response as a result dict.</p>
</li>
<li>
<p><code>classify_error(error, status_code, body)</code>
  ‚Äî Classify an error for recovery strategy.</p>
</li>
<li><code>backoff_delay(attempt, base, max_delay, jitter)</code>
  ‚Äî Calculate exponential backoff delay with optional jitter.</li>
<li><code>async retry_with_recovery(fn, max_retries, provider, on_retry)</code>
  ‚Äî Execute fn with automatic retry, backoff, and circuit breaker.</li>
<li><code>friendly_error(error, provider)</code>
  ‚Äî Convert technical errors to user-friendly messages.</li>
</ul>
<h3 id="salmalmcoreexceptions"><code>salmalm.core.exceptions</code><a class="headerlink" href="#salmalmcoreexceptions" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm exception hierarchy.</p>
</blockquote>
<h4 id="class-salmalmerror"><code>class SalmAlmError</code><a class="headerlink" href="#class-salmalmerror" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Base exception for all SalmAlm errors.</p>
</blockquote>
<h4 id="class-llmerror"><code>class LLMError</code><a class="headerlink" href="#class-llmerror" title="Permanent link">&para;</a></h4>
<blockquote>
<p>LLM API call or response errors.</p>
</blockquote>
<h4 id="class-toolerror"><code>class ToolError</code><a class="headerlink" href="#class-toolerror" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Tool execution errors.</p>
</blockquote>
<h4 id="class-autherror"><code>class AuthError</code><a class="headerlink" href="#class-autherror" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Authentication / authorization errors.</p>
</blockquote>
<h4 id="class-configerror"><code>class ConfigError</code><a class="headerlink" href="#class-configerror" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Configuration loading / validation errors.</p>
</blockquote>
<h4 id="class-sessionerror"><code>class SessionError</code><a class="headerlink" href="#class-sessionerror" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Session management errors.</p>
</blockquote>
<h3 id="salmalmcoreexport"><code>salmalm.core.export</code><a class="headerlink" href="#salmalmcoreexport" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Conversation Export ‚Äî export current session as Markdown, JSON, or HTML.</p>
</blockquote>
<ul>
<li><code>export_session(session, fmt)</code>
  ‚Äî Export a session to the specified format.</li>
</ul>
<h3 id="salmalmcorehealth"><code>salmalm.core.health</code><a class="headerlink" href="#salmalmcorehealth" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Health Endpoint ‚Äî K8s readiness/liveness probe compatible.</p>
</blockquote>
<ul>
<li><code>get_health_report()</code>
  ‚Äî Build comprehensive health report.</li>
</ul>
<h3 id="salmalmcoreimage_resize"><code>salmalm.core.image_resize</code><a class="headerlink" href="#salmalmcoreimage_resize" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Auto-resize images for vision input to reduce token cost.</p>
</blockquote>
<ul>
<li><code>resize_image_b64(b64_data, mime, max_dim)</code>
  ‚Äî Resize a base64-encoded image so its longest side &lt;= max_dim.</li>
</ul>
<h3 id="salmalmcorellm"><code>salmalm.core.llm</code><a class="headerlink" href="#salmalmcorellm" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm LLM ‚Äî Multi-provider API calls with caching and fallback.</p>
</blockquote>
<h4 id="class-_responsesonlymodel"><code>class _ResponsesOnlyModel</code><a class="headerlink" href="#class-_responsesonlymodel" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Raised when a model is v1/responses-only (404 'not a chat model').</p>
</blockquote>
<ul>
<li><code>call_llm(messages, model, tools, max_tokens, thinking)</code>
  ‚Äî Call LLM API. Returns {'content': str, 'tool_calls': list, 'usage': dict}.</li>
</ul>
<h3 id="salmalmcorellm_cron"><code>salmalm.core.llm_cron</code><a class="headerlink" href="#salmalmcorellm_cron" title="Permanent link">&para;</a></h3>
<blockquote>
<p>LLM Cron Manager ‚Äî scheduled AI tasks with error tracking and auto-disable.</p>
</blockquote>
<h4 id="class-llmcronmanager"><code>class LLMCronManager</code><a class="headerlink" href="#class-llmcronmanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>OpenClaw-style LLM cron with isolated session execution.</p>
</blockquote>
<ul>
<li><code>load_jobs()</code>
  ‚Äî Load persisted cron jobs from file.</li>
<li><code>save_jobs()</code>
  ‚Äî Persist cron jobs to file.</li>
<li><code>add_job(name, schedule, prompt, model, notify)</code>
  ‚Äî Add a new LLM cron job.</li>
<li><code>remove_job(job_id)</code>
  ‚Äî Remove a scheduled cron job by ID.</li>
<li><code>list_jobs()</code>
  ‚Äî List all registered cron jobs with their schedules.</li>
<li><code>async tick()</code>
  ‚Äî Check and execute due jobs. Also runs heartbeat if due.</li>
</ul>
<h3 id="salmalmcorellm_loop"><code>salmalm.core.llm_loop</code><a class="headerlink" href="#salmalmcorellm_loop" title="Permanent link">&para;</a></h3>
<blockquote>
<p>LLM call loop ‚Äî streaming, failover, cooldowns, routing.</p>
</blockquote>
<ul>
<li><code>reset_cooldowns()</code>
  ‚Äî Clear all model/provider cooldowns.</li>
<li><code>get_cooldown_status()</code>
  ‚Äî Return current cooldown state with human-readable info.</li>
<li><code>get_failover_config()</code>
  ‚Äî Public getter for failover config (used by web API / settings).</li>
<li><code>save_failover_config(config)</code>
  ‚Äî Save user's failover chain config.</li>
<li><code>async call_with_failover(messages, model, tools, max_tokens, thinking)</code>
  ‚Äî LLM call with automatic failover on failure.</li>
<li><code>async try_llm_call(messages, model, tools, max_tokens, thinking)</code>
  ‚Äî Single LLM call attempt with transient error retry.</li>
</ul>
<h3 id="salmalmcorellm_router"><code>salmalm.core.llm_router</code><a class="headerlink" href="#salmalmcorellm_router" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Multi-Provider LLM Router ‚Äî unified API across Anthropic, OpenAI, Google, Groq, Ollama.</p>
</blockquote>
<h4 id="class-llmrouter"><code>class LLMRouter</code><a class="headerlink" href="#class-llmrouter" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Multi-provider LLM router with fallback.</p>
</blockquote>
<ul>
<li><code>current_model()</code>
  ‚Äî Current model.</li>
<li><code>current_model(model)</code>
  ‚Äî Current model.</li>
<li><code>switch_model(model)</code>
  ‚Äî Switch to a new model. Returns confirmation message.</li>
<li><code>list_models()</code>
  ‚Äî Format available models for display.</li>
<li>
<p><code>call(messages, model, max_tokens, tools, timeout)</code>
  ‚Äî Call LLM with automatic fallback.</p>
</li>
<li>
<p><code>get_provider_models(provider)</code>
  ‚Äî Return model list for provider ‚Äî live from API if possible, cached for 1h.</p>
</li>
<li><code>refresh_model_cache()</code>
  ‚Äî Force-refresh model cache for all providers. Returns {provider: count}.</li>
<li><code>detect_provider(model)</code>
  ‚Äî Detect provider from model string. Returns (provider_name, bare_model).</li>
<li><code>get_api_key(provider)</code>
  ‚Äî Get API key for provider from environment or vault.</li>
<li><code>detect_ollama(base_url)</code>
  ‚Äî Auto-detect Ollama and list installed models.</li>
<li><code>is_provider_available(provider)</code>
  ‚Äî Check if a provider is available (has API key or is local).</li>
<li><code>list_available_models()</code>
  ‚Äî List all available models across configured providers (live from API).</li>
<li><code>handle_model_command(cmd, session)</code>
  ‚Äî Handle /model list | /model switch <name>.</li>
<li><code>register_commands(router)</code>
  ‚Äî Register /model commands with CommandRouter.</li>
<li><code>register_tools(registry_module)</code>
  ‚Äî Register LLM router tools.</li>
</ul>
<h3 id="salmalmcorellm_stream"><code>salmalm.core.llm_stream</code><a class="headerlink" href="#salmalmcorellm_stream" title="Permanent link">&para;</a></h3>
<blockquote>
<p>LLM streaming response handlers.</p>
</blockquote>
<ul>
<li><code>stream_google(messages, model, tools, max_tokens)</code>
  ‚Äî Stream Google Gemini API responses using streamGenerateContent SSE.</li>
<li><code>stream_anthropic(messages, model, tools, max_tokens, thinking)</code>
  ‚Äî Stream Anthropic API responses token-by-token using raw urllib SSE.</li>
</ul>
<h3 id="salmalmcorellm_task"><code>salmalm.core.llm_task</code><a class="headerlink" href="#salmalmcorellm_task" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Structured LLM output ‚Äî JSON Schema validated LLM calls.</p>
</blockquote>
<h4 id="class-llmtask"><code>class LLMTask</code><a class="headerlink" href="#class-llmtask" title="Permanent link">&para;</a></h4>
<blockquote>
<p>JSON Schema Í≤ÄÏ¶ù Í∏∞Î∞ò Íµ¨Ï°∞Ìôî LLM Ìò∏Ï∂ú.</p>
</blockquote>
<ul>
<li><code>async run(prompt, input_data, schema, model, max_tokens)</code>
  ‚Äî LLMÏóê JSON-only ÏùëÎãµ ÏöîÏ≤≠, schemaÎ°ú Í≤ÄÏ¶ù.</li>
</ul>
<h3 id="salmalmcoreloop_helpers"><code>salmalm.core.loop_helpers</code><a class="headerlink" href="#salmalmcoreloop_helpers" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Extracted helpers from IntelligenceEngine._execute_loop.</p>
</blockquote>
<ul>
<li><code>check_abort(session_id)</code>
  ‚Äî Check if generation was aborted. Returns partial response or None.</li>
<li><code>select_model(model_override, user_message, tier, iteration, router)</code>
  ‚Äî Select model based on override, tier, or router.</li>
<li><code>trim_history(session, classification)</code>
  ‚Äî Aggressive history trim for simple intents.</li>
<li><code>prune_session_context(session, model)</code>
  ‚Äî Prune context if cache TTL expired.</li>
<li><code>record_usage(session_id, model, result, classification, iteration)</code>
  ‚Äî Record API usage and audit log.</li>
<li><code>validate_tool_calls(tool_calls)</code>
  ‚Äî Validate and parse tool call arguments. Returns (valid_tools, error_outputs).</li>
<li><code>check_circuit_breaker(tool_outputs, consecutive_errors, max_errors)</code>
  ‚Äî Check for consecutive tool errors. Returns (new_error_count, error_message_or_None).</li>
<li><code>check_loop_detection(tool_calls, recent_calls)</code>
  ‚Äî Detect infinite loops from repeated tool calls. Returns error message or None.</li>
<li><code>async handle_empty_response(call_fn, pruned_messages, model, tools)</code>
  ‚Äî Retry empty responses up to 2 times with backoff.</li>
<li><code>finalize_response(result, response)</code>
  ‚Äî Handle truncation and content filter edge cases.</li>
<li><code>is_truncated(result)</code>
  ‚Äî Check if a response was truncated (hit max_tokens).</li>
<li><code>auto_log_conversation(user_message, response, classification)</code>
  ‚Äî Auto-log significant conversations to daily memory.</li>
</ul>
<h3 id="salmalmcorememory"><code>salmalm.core.memory</code><a class="headerlink" href="#salmalmcorememory" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Enhanced Memory System ‚Äî OpenClaw-style two-layer memory.</p>
</blockquote>
<h4 id="class-memorymanager"><code>class MemoryManager</code><a class="headerlink" href="#class-memorymanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>OpenClaw-style memory management with auto-curation.</p>
</blockquote>
<ul>
<li><code>read(filename)</code>
  ‚Äî Read a memory file. Supports MEMORY.md and memory/YYYY-MM-DD.md.</li>
<li><code>write(filename, content, append)</code>
  ‚Äî Write to a memory file. Secrets are automatically scrubbed.</li>
<li><code>search(query, max_results)</code>
  ‚Äî Search across all memory files using TF-IDF.</li>
<li><code>list_files()</code>
  ‚Äî List all memory files.</li>
<li><code>load_session_context()</code>
  ‚Äî Load today + yesterday memory for session startup injection.</li>
<li><code>auto_recall(user_message, max_results)</code>
  ‚Äî Search memory for context relevant to user message.</li>
<li><code>flush_before_compaction(session)</code>
  ‚Äî Save important context from session to daily log before compaction.</li>
<li><code>auto_curate(days_back)</code>
  ‚Äî Scan recent daily logs and promote important entries to MEMORY.md.</li>
</ul>
<h3 id="salmalmcoremodel_selection"><code>salmalm.core.model_selection</code><a class="headerlink" href="#salmalmcoremodel_selection" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Model selection ‚Äî single authority for choosing which model handles a message.</p>
</blockquote>
<ul>
<li><code>fix_model_name(model)</code>
  ‚Äî Correct outdated model names to actual API IDs.</li>
<li><code>load_routing_config()</code>
  ‚Äî Load user's model routing config. Returns {simple, moderate, complex} model IDs.</li>
<li><code>save_routing_config(config)</code>
  ‚Äî Save user's model routing config.</li>
<li><code>auto_optimize_routing(available_keys)</code>
  ‚Äî Generate optimal routing config based on available API keys.</li>
<li><code>auto_optimize_and_save(available_keys)</code>
  ‚Äî Auto-optimize routing and save to config file. Returns the config.</li>
<li><code>select_model(message, session)</code>
  ‚Äî Select optimal model based on message complexity.</li>
</ul>
<h3 id="salmalmcoreplugin_watcher"><code>salmalm.core.plugin_watcher</code><a class="headerlink" href="#salmalmcoreplugin_watcher" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Plugin Hot-Reload ‚Äî polling-based watcher for plugins/ directory.</p>
</blockquote>
<h4 id="class-pluginwatcher"><code>class PluginWatcher</code><a class="headerlink" href="#class-pluginwatcher" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Polling-based watcher for plugin hot-reload.</p>
</blockquote>
<ul>
<li><code>start()</code>
  ‚Äî Start watching plugins/ directory in background.</li>
<li><code>stop()</code>
  ‚Äî Stop the watcher.</li>
<li><code>running()</code>
  ‚Äî Running.</li>
<li><code>reload_plugins(names)</code>
  ‚Äî Reload specific plugins or all if names is None.</li>
<li><code>reload_all()</code>
  ‚Äî Reload all plugins (for /plugins reload command).</li>
</ul>
<h3 id="salmalmcoreprompt"><code>salmalm.core.prompt</code><a class="headerlink" href="#salmalmcoreprompt" title="Permanent link">&para;</a></h3>
<ul>
<li><code>ensure_personas_dir()</code>
  ‚Äî Create personas directory and install built-in presets if missing.</li>
<li><code>list_personas()</code>
  ‚Äî List all available personas.</li>
<li><code>get_persona(name)</code>
  ‚Äî Get persona content by name.</li>
<li><code>create_persona(name, content)</code>
  ‚Äî Create or update a custom persona.</li>
<li><code>delete_persona(name)</code>
  ‚Äî Delete a custom persona (cannot delete built-in ones).</li>
<li><code>switch_persona(session_id, name)</code>
  ‚Äî Switch active persona for a session. Returns persona content or None.</li>
<li><code>get_active_persona(session_id)</code>
  ‚Äî Get the active persona name for a session.</li>
<li><code>get_user_soul()</code>
  ‚Äî Read user SOUL.md from ~/.salmalm/SOUL.md. Returns empty string if not found.</li>
<li><code>set_user_soul(content)</code>
  ‚Äî Write user SOUL.md to ~/.salmalm/SOUL.md.</li>
<li><code>reset_user_soul()</code>
  ‚Äî Delete user SOUL.md (revert to default).</li>
<li><code>build_system_prompt(full, mode)</code>
  ‚Äî Build system prompt from SOUL.md + context files.</li>
</ul>
<h3 id="salmalmcorescheduler"><code>salmalm.core.scheduler</code><a class="headerlink" href="#salmalmcorescheduler" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Cron scheduler + Heartbeat manager ‚Äî extracted from core.py.</p>
</blockquote>
<h4 id="class-cronscheduler"><code>class CronScheduler</code><a class="headerlink" href="#class-cronscheduler" title="Permanent link">&para;</a></h4>
<blockquote>
<p>OpenClaw-style cron scheduler with isolated session execution.</p>
</blockquote>
<ul>
<li><code>add_job(name, interval_seconds, callback)</code>
  ‚Äî Add a new cron job with the given schedule and callback.</li>
<li><code>async run()</code>
  ‚Äî Start the cron scheduler loop.</li>
<li><code>stop()</code>
  ‚Äî Stop the cron scheduler loop.</li>
</ul>
<h4 id="class-heartbeatmanager"><code>class HeartbeatManager</code><a class="headerlink" href="#class-heartbeatmanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>OpenClaw-style heartbeat: periodic self-check with HEARTBEAT.md.</p>
</blockquote>
<ul>
<li><code>get_prompt(cls)</code>
  ‚Äî Read HEARTBEAT.md for the heartbeat checklist.</li>
<li><code>should_beat(cls)</code>
  ‚Äî Check if it's time for a heartbeat.</li>
<li><code>get_state(cls)</code>
  ‚Äî Get current heartbeat state (for tools/API).</li>
<li><code>update_check(cls, check_name)</code>
  ‚Äî Record that a specific check was performed (email, calendar, etc).</li>
<li><code>time_since_check(cls, check_name)</code>
  ‚Äî Seconds since a named check was last performed. None if never.</li>
<li><code>async beat(cls)</code>
  ‚Äî Execute a heartbeat check in an isolated session.</li>
</ul>
<h3 id="salmalmcoresearch"><code>salmalm.core.search</code><a class="headerlink" href="#salmalmcoresearch" title="Permanent link">&para;</a></h3>
<blockquote>
<p>TF-IDF search engine ‚Äî pure Python, no external deps.</p>
</blockquote>
<h4 id="class-tfidfsearch"><code>class TFIDFSearch</code><a class="headerlink" href="#class-tfidfsearch" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Lightweight TF-IDF + cosine similarity search. No external deps.</p>
</blockquote>
<ul>
<li><code>search(query, max_results)</code>
  ‚Äî Search with TF-IDF + cosine similarity. Returns [(score, label, lineno, snippet)].</li>
</ul>
<h3 id="salmalmcoresession_manager"><code>salmalm.core.session_manager</code><a class="headerlink" href="#salmalmcoresession_manager" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Session management ‚Äî pruning, compaction, cache TTL tracking.</p>
</blockquote>
<ul>
<li><code>estimate_context_window(model_name)</code>
  ‚Äî Estimate context window tokens for a model by substring match.</li>
<li><code>prune_context(messages, context_window_tokens)</code>
  ‚Äî Prune old tool_result messages before LLM call.</li>
</ul>
<h3 id="salmalmcoresession_store"><code>salmalm.core.session_store</code><a class="headerlink" href="#salmalmcoresession_store" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Session management ‚Äî Session class, get/rollback/branch/save/restore.</p>
</blockquote>
<h4 id="class-session"><code>class Session</code><a class="headerlink" href="#class-session" title="Permanent link">&para;</a></h4>
<blockquote>
<p>OpenClaw-style isolated session with its own context.</p>
</blockquote>
<ul>
<li><code>add_system(content)</code>
  ‚Äî Add a system message to the session.</li>
<li><code>add_user(content)</code>
  ‚Äî Add a user message to the session.</li>
<li><code>add_assistant(content)</code>
  ‚Äî Add an assistant response to the session.</li>
<li>
<p><code>add_tool_results(results)</code>
  ‚Äî Add tool results as a single user message with all results.</p>
</li>
<li>
<p><code>get_telegram_bot()</code>
  ‚Äî Accessor for the Telegram bot instance (avoids direct global access).</p>
</li>
<li><code>set_telegram_bot(bot)</code>
  ‚Äî Set the Telegram bot instance (called during startup).</li>
<li><code>get_session(session_id, user_id)</code>
  ‚Äî Get or create a chat session by ID.</li>
<li><code>rollback_session(session_id, count)</code>
  ‚Äî Roll back the last <code>count</code> user+assistant message pairs.</li>
<li><code>branch_session(session_id, message_index)</code>
  ‚Äî Create a new session branching from session_id at message_index.</li>
<li><code>save_session_to_disk(session_id)</code>
  ‚Äî Serialize session state to ~/.salmalm/sessions/{id}.json.</li>
<li><code>restore_session(session_id)</code>
  ‚Äî Load session from ~/.salmalm/sessions/{id}.json.</li>
<li><code>restore_all_sessions_from_disk()</code>
  ‚Äî On startup, restore all sessions from disk.</li>
</ul>
<h3 id="salmalmcoreshutdown"><code>salmalm.core.shutdown</code><a class="headerlink" href="#salmalmcoreshutdown" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Graceful Shutdown Manager ‚Äî drain LLM streams, cancel tools, flush sessions, notify WS.</p>
</blockquote>
<h4 id="class-shutdownmanager"><code>class ShutdownManager</code><a class="headerlink" href="#class-shutdownmanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Coordinates graceful shutdown across all subsystems.</p>
</blockquote>
<ul>
<li><code>is_shutting_down()</code>
  ‚Äî Is shutting down.</li>
<li><code>async execute(timeout)</code>
  ‚Äî Run the full shutdown sequence.</li>
</ul>
<h3 id="salmalmcoreslash_commands"><code>salmalm.core.slash_commands</code><a class="headerlink" href="#salmalmcoreslash_commands" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Slash command handlers ‚Äî extracted from engine.py for maintainability.</p>
</blockquote>
<ul>
<li><code>record_response_usage(session_id, model, usage)</code>
  ‚Äî Record per-response usage for /usage command.</li>
</ul>
<h3 id="salmalmcoreslash_commands_ext"><code>salmalm.core.slash_commands_ext</code><a class="headerlink" href="#salmalmcoreslash_commands_ext" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Extended slash commands: context, usage, thought, subagents.</p>
</blockquote>
<h3 id="salmalmcoresmart_context"><code>salmalm.core.smart_context</code><a class="headerlink" href="#salmalmcoresmart_context" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Smart Context Window ‚Äî intelligent context injection with token budget.</p>
</blockquote>
<h4 id="class-contextchunk"><code>class ContextChunk</code><a class="headerlink" href="#class-contextchunk" title="Permanent link">&para;</a></h4>
<blockquote>
<p>A piece of context with metadata.</p>
</blockquote>
<h4 id="class-smartcontextwindow"><code>class SmartContextWindow</code><a class="headerlink" href="#class-smartcontextwindow" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Intelligent context window manager.</p>
</blockquote>
<ul>
<li><code>budget()</code>
  ‚Äî Budget.</li>
<li><code>budget(tokens)</code>
  ‚Äî Budget.</li>
<li><code>used_tokens()</code>
  ‚Äî Used tokens.</li>
<li><code>remaining_tokens()</code>
  ‚Äî Remaining tokens.</li>
<li><code>set_recent_messages(messages)</code>
  ‚Äî Set recent conversation messages for topic analysis.</li>
<li><code>analyze_topic()</code>
  ‚Äî Analyze current conversation topic from recent messages.</li>
<li><code>gather_context(sources)</code>
  ‚Äî Gather and rank context chunks within token budget.</li>
<li><code>build_context_string()</code>
  ‚Äî Build the injected context as a single string.</li>
<li><code>show()</code>
  ‚Äî Format current injected context for display.</li>
<li>
<p><code>clear()</code>
  ‚Äî Clear injected context.</p>
</li>
<li>
<p><code>estimate_tokens(text)</code>
  ‚Äî Rough token count estimate.</p>
</li>
<li><code>extract_keywords(text, top_n)</code>
  ‚Äî Extract top keywords from text using simple TF analysis.</li>
<li><code>relevance_score(keywords, text)</code>
  ‚Äî Score text relevance against keywords (0.0-1.0).</li>
<li><code>handle_context_command(cmd, session)</code>
  ‚Äî Handle /context show | /context budget <tokens>.</li>
<li><code>register_commands(router)</code>
  ‚Äî Register /context commands.</li>
<li><code>register_tools(registry_module)</code>
  ‚Äî Register smart context tools.</li>
</ul>
<h3 id="salmalmcoretool_selector"><code>salmalm.core.tool_selector</code><a class="headerlink" href="#salmalmcoretool_selector" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Dynamic tool selection ‚Äî intent-based tool filtering for token optimization.</p>
</blockquote>
<ul>
<li><code>get_tools_for_provider(provider, intent, user_message)</code>
  ‚Äî Get tools for provider.</li>
</ul>
<h2 id="tools-tools-58-built-in-tools-58">tools/ ‚Äî Tools ‚Äî 58+ Built-in Tools / ÎèÑÍµ¨ ‚Äî 58Í∞ú Ïù¥ÏÉÅ ÎÇ¥Ïû• ÎèÑÍµ¨<a class="headerlink" href="#tools-tools-58-built-in-tools-58" title="Permanent link">&para;</a></h2>
<h3 id="salmalmtoolstool_handlers"><code>salmalm.tools.tool_handlers</code><a class="headerlink" href="#salmalmtoolstool_handlers" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm tool handlers ‚Äî delegates to tool_registry + re-exports shared utilities.</p>
</blockquote>
<ul>
<li><code>execute_tool(name, args)</code>
  ‚Äî Execute a tool ‚Äî delegates to tool_registry.</li>
</ul>
<h3 id="salmalmtoolstool_registry"><code>salmalm.tools.tool_registry</code><a class="headerlink" href="#salmalmtoolstool_registry" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Tool registry ‚Äî decorator-based tool dispatch replacing if-elif chain.</p>
</blockquote>
<ul>
<li><code>register(name)</code>
  ‚Äî Decorator to register a tool handler function.</li>
<li><code>register_dynamic(name, handler, tool_def)</code>
  ‚Äî Dynamically register a tool at runtime (for plugins).</li>
<li><code>unregister_dynamic(name)</code>
  ‚Äî Remove a dynamically registered tool.</li>
<li><code>get_dynamic_tools()</code>
  ‚Äî Return all dynamically registered tool definitions.</li>
<li><code>get_all_tools()</code>
  ‚Äî Return all tool definitions (static + dynamic).</li>
<li><code>execute_tool(name, args)</code>
  ‚Äî Execute a tool and return result string. Auto-dispatches to remote node if available.</li>
</ul>
<h3 id="salmalmtoolstools"><code>salmalm.tools.tools</code><a class="headerlink" href="#salmalmtoolstools" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm tool definitions ‚Äî schema for all built-in tools.</p>
</blockquote>
<h3 id="salmalmtoolstools_agent"><code>salmalm.tools.tools_agent</code><a class="headerlink" href="#salmalmtoolstools_agent" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Agent tools: sub_agent, skill_manage, plugin_manage, cron_manage, mcp_manage, node_manage.</p>
</blockquote>
<ul>
<li><code>handle_sub_agent(args)</code>
  ‚Äî Handle sub agent.</li>
<li><code>handle_skill_manage(args)</code>
  ‚Äî Handle skill manage.</li>
<li><code>handle_plugin_manage(args)</code>
  ‚Äî Handle plugin manage.</li>
<li><code>handle_cron_manage(args)</code>
  ‚Äî Handle cron manage.</li>
<li><code>handle_mcp_manage(args)</code>
  ‚Äî Handle mcp manage.</li>
<li><code>handle_node_manage(args)</code>
  ‚Äî Handle node manage.</li>
<li><code>handle_rag_search(args)</code>
  ‚Äî Handle rag search.</li>
</ul>
<h3 id="salmalmtoolstools_brave"><code>salmalm.tools.tools_brave</code><a class="headerlink" href="#salmalmtoolstools_brave" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Brave Search API tools ‚Äî web, news, images, LLM context.</p>
</blockquote>
<ul>
<li><code>brave_web_search(args)</code>
  ‚Äî Brave Ïõπ Í≤ÄÏÉâ.</li>
<li><code>brave_llm_context(args)</code>
  ‚Äî Brave LLM Context API ‚Äî RAG Í∞ïÌôîÏö©.</li>
<li><code>brave_news_search(args)</code>
  ‚Äî Brave Îâ¥Ïä§ Í≤ÄÏÉâ.</li>
<li><code>brave_image_search(args)</code>
  ‚Äî Brave Ïù¥ÎØ∏ÏßÄ Í≤ÄÏÉâ.</li>
</ul>
<h3 id="salmalmtoolstools_browser"><code>salmalm.tools.tools_browser</code><a class="headerlink" href="#salmalmtoolstools_browser" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Browser automation tool ‚Äî OpenClaw snapshot/act pattern via Playwright subprocess.</p>
</blockquote>
<ul>
<li><code>handle_browser(args)</code>
  ‚Äî Browser automation ‚Äî OpenClaw snapshot/act pattern.</li>
</ul>
<h3 id="salmalmtoolstools_calendar"><code>salmalm.tools.tools_calendar</code><a class="headerlink" href="#salmalmtoolstools_calendar" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Google Calendar tools ‚Äî granular calendar_list, calendar_add, calendar_delete.</p>
</blockquote>
<ul>
<li><code>handle_calendar_list(args)</code>
  ‚Äî List upcoming calendar events.</li>
<li><code>handle_calendar_add(args)</code>
  ‚Äî Add a calendar event.</li>
<li><code>handle_calendar_delete(args)</code>
  ‚Äî Delete a calendar event.</li>
</ul>
<h3 id="salmalmtoolstools_common"><code>salmalm.tools.tools_common</code><a class="headerlink" href="#salmalmtoolstools_common" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Shared helper functions for tool modules.</p>
</blockquote>
<h3 id="salmalmtoolstools_email"><code>salmalm.tools.tools_email</code><a class="headerlink" href="#salmalmtoolstools_email" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Gmail tools ‚Äî granular email_inbox, email_read, email_send, email_search.</p>
</blockquote>
<ul>
<li><code>handle_email_inbox(args)</code>
  ‚Äî List recent inbox messages.</li>
<li><code>handle_email_read(args)</code>
  ‚Äî Read a specific email by message_id.</li>
<li><code>handle_email_send(args)</code>
  ‚Äî Send an email.</li>
<li><code>handle_email_search(args)</code>
  ‚Äî Search emails with Gmail query syntax.</li>
</ul>
<h3 id="salmalmtoolstools_exec"><code>salmalm.tools.tools_exec</code><a class="headerlink" href="#salmalmtoolstools_exec" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Exec tools: exec, python_eval, background session management.</p>
</blockquote>
<ul>
<li><code>handle_exec(args)</code>
  ‚Äî Handle exec.</li>
<li><code>handle_exec_session(args)</code>
  ‚Äî Manage background exec sessions: list, poll, kill.</li>
<li><code>handle_python_eval(args)</code>
  ‚Äî Handle python eval. Disabled by default ‚Äî enable with SALMALM_PYTHON_EVAL=1.</li>
</ul>
<h3 id="salmalmtoolstools_file"><code>salmalm.tools.tools_file</code><a class="headerlink" href="#salmalmtoolstools_file" title="Permanent link">&para;</a></h3>
<blockquote>
<p>File tools: read_file, write_file, edit_file, diff_files.</p>
</blockquote>
<ul>
<li><code>handle_read_file(args)</code>
  ‚Äî Handle read file.</li>
<li><code>handle_write_file(args)</code>
  ‚Äî Handle write file.</li>
<li><code>handle_edit_file(args)</code>
  ‚Äî Handle edit file.</li>
<li><code>handle_diff_files(args)</code>
  ‚Äî Handle diff files.</li>
</ul>
<h3 id="salmalmtoolstools_google"><code>salmalm.tools.tools_google</code><a class="headerlink" href="#salmalmtoolstools_google" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Google tools: google_calendar, gmail.</p>
</blockquote>
<ul>
<li><code>handle_google_calendar(args)</code>
  ‚Äî Handle google calendar.</li>
<li><code>handle_gmail(args)</code>
  ‚Äî Handle gmail.</li>
</ul>
<h3 id="salmalmtoolstools_media"><code>salmalm.tools.tools_media</code><a class="headerlink" href="#salmalmtoolstools_media" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Media tools: image_generate, image_analyze, tts, stt, screenshot, tts_generate.</p>
</blockquote>
<ul>
<li><code>handle_image_generate(args)</code>
  ‚Äî Handle image generate.</li>
<li><code>handle_image_analyze(args)</code>
  ‚Äî Handle image analyze.</li>
<li><code>handle_tts(args)</code>
  ‚Äî Handle tts.</li>
<li><code>handle_stt(args)</code>
  ‚Äî Handle stt.</li>
<li><code>handle_screenshot(args)</code>
  ‚Äî Handle screenshot.</li>
<li><code>handle_tts_generate(args)</code>
  ‚Äî Handle tts generate.</li>
</ul>
<h3 id="salmalmtoolstools_memory"><code>salmalm.tools.tools_memory</code><a class="headerlink" href="#salmalmtoolstools_memory" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Memory tools: memory_read, memory_write, memory_search, usage_report.</p>
</blockquote>
<ul>
<li><code>handle_memory_read(args)</code>
  ‚Äî Handle memory read.</li>
<li><code>handle_memory_write(args)</code>
  ‚Äî Handle memory write.</li>
<li><code>handle_memory_search(args)</code>
  ‚Äî Handle memory search.</li>
<li><code>handle_usage_report(args)</code>
  ‚Äî Handle usage report.</li>
</ul>
<h3 id="salmalmtoolstools_mesh"><code>salmalm.tools.tools_mesh</code><a class="headerlink" href="#salmalmtoolstools_mesh" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Mesh and Canvas tool handlers. / Î©îÏãú Î∞è Ï∫îÎ≤ÑÏä§ ÎèÑÍµ¨ Ìï∏Îì§Îü¨.</p>
</blockquote>
<ul>
<li><code>handle_mesh(args)</code>
  ‚Äî SalmAlm Mesh ‚Äî peer-to-peer networking.</li>
<li><code>handle_canvas(args)</code>
  ‚Äî Canvas ‚Äî local HTML preview and rendering. / Î°úÏª¨ HTML ÌîÑÎ¶¨Î∑∞ Î∞è Î†åÎçîÎßÅ.</li>
</ul>
<h3 id="salmalmtoolstools_misc"><code>salmalm.tools.tools_misc</code><a class="headerlink" href="#salmalmtoolstools_misc" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Misc tools: reminder, workflow, file_index, notification, weather, rss_reader.</p>
</blockquote>
<ul>
<li><code>handle_reminder(args)</code>
  ‚Äî Handle reminder.</li>
<li><code>handle_workflow(args)</code>
  ‚Äî Handle workflow.</li>
<li><code>handle_file_index(args)</code>
  ‚Äî Handle file index.</li>
<li><code>handle_notification(args)</code>
  ‚Äî Handle notification.</li>
<li><code>handle_weather(args)</code>
  ‚Äî Handle weather.</li>
<li><code>handle_rss_reader(args)</code>
  ‚Äî Handle rss reader.</li>
</ul>
<h3 id="salmalmtoolstools_patch"><code>salmalm.tools.tools_patch</code><a class="headerlink" href="#salmalmtoolstools_patch" title="Permanent link">&para;</a></h3>
<blockquote>
<p>apply_patch tool ‚Äî multi-file patch application.</p>
</blockquote>
<ul>
<li><code>apply_patch(patch_text, base_dir)</code>
  ‚Äî Apply a multi-file patch.</li>
</ul>
<h3 id="salmalmtoolstools_personal"><code>salmalm.tools.tools_personal</code><a class="headerlink" href="#salmalmtoolstools_personal" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Personal assistant tools ‚Äî notes, expenses, saved links, pomodoro, routines, briefing.</p>
</blockquote>
<ul>
<li><code>handle_note(args)</code>
  ‚Äî Personal notes / knowledge base.</li>
<li><code>handle_expense(args)</code>
  ‚Äî Expense tracker.</li>
<li><code>handle_save_link(args)</code>
  ‚Äî Save a link/article for later reading.</li>
<li><code>handle_pomodoro(args)</code>
  ‚Äî Pomodoro timer.</li>
<li><code>handle_routine(args)</code>
  ‚Äî Morning/evening routine automation.</li>
<li><code>handle_briefing(args)</code>
  ‚Äî Generate daily briefing.</li>
</ul>
<h3 id="salmalmtoolstools_reaction"><code>salmalm.tools.tools_reaction</code><a class="headerlink" href="#salmalmtoolstools_reaction" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Reaction Tools ‚Äî Send emoji reactions across channels.</p>
</blockquote>
<ul>
<li><code>send_reaction(channel, message_id, emoji)</code>
  ‚Äî Send an emoji reaction to a message.</li>
</ul>
<h3 id="salmalmtoolstools_reminder"><code>salmalm.tools.tools_reminder</code><a class="headerlink" href="#salmalmtoolstools_reminder" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Enhanced reminder tools ‚Äî natural language time parsing (KR+EN), recurring reminders.</p>
</blockquote>
<ul>
<li><code>parse_natural_time(text)</code>
  ‚Äî Parse natural language time expression into datetime.</li>
<li><code>parse_repeat_pattern(text)</code>
  ‚Äî Parse repeat pattern from text.</li>
</ul>
<h3 id="salmalmtoolstools_sandbox"><code>salmalm.tools.tools_sandbox</code><a class="headerlink" href="#salmalmtoolstools_sandbox" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Sandbox exec tool handler. / ÏÉåÎìúÎ∞ïÏä§ Ïã§Ìñâ ÎèÑÍµ¨ Ìï∏Îì§Îü¨.</p>
</blockquote>
<ul>
<li><code>handle_sandbox_exec(args)</code>
  ‚Äî Execute a command in OS-native sandbox. / OS Í∏∞Î≥∏ ÏÉåÎìúÎ∞ïÏä§ÏóêÏÑú Î™ÖÎ†π Ïã§Ìñâ.</li>
</ul>
<h3 id="salmalmtoolstools_schema_ext"><code>salmalm.tools.tools_schema_ext</code><a class="headerlink" href="#salmalmtoolstools_schema_ext" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Extended tool definitions (tools 32-62).</p>
</blockquote>
<h3 id="salmalmtoolstools_system"><code>salmalm.tools.tools_system</code><a class="headerlink" href="#salmalmtoolstools_system" title="Permanent link">&para;</a></h3>
<blockquote>
<p>System tools: system_monitor, health_check.</p>
</blockquote>
<ul>
<li><code>handle_system_monitor(args)</code>
  ‚Äî Handle system monitor.</li>
<li><code>handle_health_check(args)</code>
  ‚Äî Handle health check.</li>
</ul>
<h3 id="salmalmtoolstools_ui"><code>salmalm.tools.tools_ui</code><a class="headerlink" href="#salmalmtoolstools_ui" title="Permanent link">&para;</a></h3>
<blockquote>
<p>UI control tool ‚Äî lets AI change UI settings via WebSocket commands.</p>
</blockquote>
<ul>
<li><code>handle_ui_control(args)</code>
  ‚Äî Execute a UI control command.</li>
<li><code>pop_pending_commands()</code>
  ‚Äî Pop all pending UI commands (called by WebSocket broadcaster).</li>
</ul>
<h3 id="salmalmtoolstools_util"><code>salmalm.tools.tools_util</code><a class="headerlink" href="#salmalmtoolstools_util" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Utility tools: hash_text, regex_test, json_query, clipboard, qr_code, translate.</p>
</blockquote>
<ul>
<li><code>handle_hash_text(args)</code>
  ‚Äî Handle hash text.</li>
<li><code>handle_regex_test(args)</code>
  ‚Äî Handle regex test.</li>
<li><code>handle_json_query(args)</code>
  ‚Äî Handle json query.</li>
<li><code>handle_clipboard(args)</code>
  ‚Äî Handle clipboard.</li>
<li><code>handle_translate(args)</code>
  ‚Äî Handle translate.</li>
<li><code>handle_qr_code(args)</code>
  ‚Äî Handle qr code.</li>
</ul>
<h3 id="salmalmtoolstools_web"><code>salmalm.tools.tools_web</code><a class="headerlink" href="#salmalmtoolstools_web" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Web tools: web_search, web_fetch, http_request.</p>
</blockquote>
<ul>
<li><code>handle_web_search(args)</code>
  ‚Äî Handle web search.</li>
<li><code>handle_web_fetch(args)</code>
  ‚Äî Handle web fetch.</li>
<li><code>handle_http_request(args)</code>
  ‚Äî Handle http request.</li>
</ul>
<h2 id="features-features-commands-rag-mcp-rag-mcp">features/ ‚Äî Features ‚Äî Commands, RAG, MCP / Í∏∞Îä• ‚Äî Î™ÖÎ†πÏñ¥, RAG, MCP<a class="headerlink" href="#features-features-commands-rag-mcp-rag-mcp" title="Permanent link">&para;</a></h2>
<h3 id="salmalmfeaturesa2a"><code>salmalm.features.a2a</code><a class="headerlink" href="#salmalmfeaturesa2a" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Agent-to-Agent Protocol ‚Äî inter-instance communication.</p>
</blockquote>
<h4 id="class-a2aprotocol"><code>class A2AProtocol</code><a class="headerlink" href="#class-a2aprotocol" title="Permanent link">&para;</a></h4>
<blockquote>
<p>SalmAlm instance-to-instance negotiation protocol.</p>
</blockquote>
<ul>
<li><code>sign(payload, secret)</code>
  ‚Äî HMAC-SHA256 signature over canonical JSON.</li>
<li><code>verify(payload, signature, secret)</code>
  ‚Äî Verify.</li>
<li><code>pair(url, shared_secret, peer_name)</code>
  ‚Äî Register a peer instance.</li>
<li><code>unpair(peer_id)</code>
  ‚Äî Unpair.</li>
<li><code>list_peers()</code>
  ‚Äî List peers.</li>
<li><code>build_request(action, params)</code>
  ‚Äî Build an unsigned A2A request payload.</li>
<li><code>send(peer_id, action, params, timeout)</code>
  ‚Äî Send an A2A request to a paired peer. Returns the response dict.</li>
<li><code>receive(body)</code>
  ‚Äî Process an incoming A2A request. Returns response dict.</li>
<li><code>approve(request_id)</code>
  ‚Äî Approve a pending inbox request.</li>
<li><code>reject(request_id)</code>
  ‚Äî Reject a pending inbox request.</li>
</ul>
<h3 id="salmalmfeaturesabort"><code>salmalm.features.abort</code><a class="headerlink" href="#salmalmfeaturesabort" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Abort Generation (ÏÉùÏÑ± Ï§ëÏßÄ) ‚Äî OpenClaw/LibreChat style.</p>
</blockquote>
<h4 id="class-abortcontroller"><code>class AbortController</code><a class="headerlink" href="#class-abortcontroller" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Per-session abort flag + streaming partial response preservation.</p>
</blockquote>
<ul>
<li><code>set_abort(session_id)</code>
  ‚Äî Set abort.</li>
<li><code>is_aborted(session_id)</code>
  ‚Äî Is aborted.</li>
<li><code>clear(session_id)</code>
  ‚Äî Clear.</li>
<li><code>save_partial(session_id, text)</code>
  ‚Äî Save partial.</li>
<li><code>get_partial(session_id)</code>
  ‚Äî Get partial.</li>
<li><code>accumulate_token(session_id, token)</code>
  ‚Äî Accumulate streaming tokens for abort recovery.</li>
<li><code>start_streaming(session_id)</code>
  ‚Äî Mark the start of a streaming response (reset accumulator).</li>
<li><code>get_accumulated(session_id)</code>
  ‚Äî Get current accumulated tokens without clearing.</li>
</ul>
<h3 id="salmalmfeaturesagents"><code>salmalm.features.agents</code><a class="headerlink" href="#salmalmfeaturesagents" title="Permanent link">&para;</a></h3>
<h4 id="class-subagent"><code>class SubAgent</code><a class="headerlink" href="#class-subagent" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Background task executor with notification on completion.</p>
</blockquote>
<ul>
<li><code>spawn(cls, task, model, notify_telegram, _depth)</code>
  ‚Äî Spawn a background sub-agent. Returns agent ID.</li>
<li><code>list_agents(cls)</code>
  ‚Äî List all sub-agents with their status, label, and runtime.</li>
<li><code>stop_agent(cls, agent_id)</code>
  ‚Äî Stop a running sub-agent.</li>
<li><code>get_log(cls, agent_id, limit)</code>
  ‚Äî Get sub-agent transcript.</li>
<li><code>get_info(cls, agent_id)</code>
  ‚Äî Get detailed metadata for a sub-agent.</li>
<li><code>get_result(cls, agent_id)</code>
  ‚Äî Get the result of a completed sub-agent run.</li>
<li><code>send_message(cls, agent_id, message)</code>
  ‚Äî Send a follow-up message to a completed sub-agent's session.</li>
<li><code>get_agent(cls, agent_id, label)</code>
  ‚Äî Get agent by id or label.</li>
<li><code>steer(cls, agent_id, message, label)</code>
  ‚Äî Send a steering message to a running sub-agent by id or label.</li>
<li><code>send_to_agent(cls, from_id, to_label, message)</code>
  ‚Äî Inter-agent communication: send message from one agent to another by label.</li>
</ul>
<h4 id="class-pluginloader"><code>class PluginLoader</code><a class="headerlink" href="#class-pluginloader" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Discover and load tool plugins from plugins/*.py files.</p>
</blockquote>
<ul>
<li><code>scan(cls)</code>
  ‚Äî Scan plugins/ directory and load all .py files as tool providers.</li>
<li><code>get_all_tools(cls)</code>
  ‚Äî Return all tool definitions from all plugins.</li>
<li><code>execute(cls, tool_name, args)</code>
  ‚Äî Execute a plugin tool by name.</li>
<li><code>reload(cls)</code>
  ‚Äî Reload all plugins.</li>
</ul>
<h4 id="class-agentconfig"><code>class AgentConfig</code><a class="headerlink" href="#class-agentconfig" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Configuration and paths for a single agent (ÏóêÏù¥Ï†ÑÌä∏ ÏÑ§Ï†ï).</p>
</blockquote>
<ul>
<li><code>save()</code>
  ‚Äî Save.</li>
<li><code>display_name()</code>
  ‚Äî Display name.</li>
<li><code>model()</code>
  ‚Äî Model.</li>
<li><code>soul_file()</code>
  ‚Äî Soul file.</li>
<li><code>api_key()</code>
  ‚Äî Api key.</li>
<li><code>allowed_tools()</code>
  ‚Äî None means all tools allowed.</li>
<li><code>to_dict()</code>
  ‚Äî To dict.</li>
</ul>
<h4 id="class-agentmanager"><code>class AgentManager</code><a class="headerlink" href="#class-agentmanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Manages multiple agents with routing by Telegram chat/user.</p>
</blockquote>
<ul>
<li><code>scan()</code>
  ‚Äî Scan agents directory and load all agent configs.</li>
<li><code>resolve(chat_key)</code>
  ‚Äî Resolve which agent handles a given chat key (e.g. 'telegram:12345').</li>
<li><code>get_agent(agent_id)</code>
  ‚Äî Get agent config by ID.</li>
<li><code>get_session_id(agent_id, base_session_id)</code>
  ‚Äî Get agent-scoped session ID.</li>
<li><code>create(agent_id, display_name, model)</code>
  ‚Äî Create a new agent. ÏÉà ÏóêÏù¥Ï†ÑÌä∏ ÏÉùÏÑ±.</li>
<li><code>delete(agent_id)</code>
  ‚Äî Delete an agent (cannot delete 'main').</li>
<li><code>bind(chat_key, agent_id)</code>
  ‚Äî Bind a chat to an agent. Ï±ÑÌåÖÏùÑ ÏóêÏù¥Ï†ÑÌä∏Ïóê Î∞îÏù∏Îî©.</li>
<li><code>unbind(chat_key)</code>
  ‚Äî Remove a chat binding.</li>
<li><code>list_agents()</code>
  ‚Äî List all agents. Ï†ÑÏ≤¥ ÏóêÏù¥Ï†ÑÌä∏ Î™©Î°ù.</li>
<li><code>list_bindings()</code>
  ‚Äî Return all chat‚Üíagent bindings.</li>
</ul>
<h3 id="salmalmfeaturesagents_skills"><code>salmalm.features.agents_skills</code><a class="headerlink" href="#salmalmfeaturesagents_skills" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Skill loading and management.</p>
</blockquote>
<h4 id="class-skillloader"><code>class SkillLoader</code><a class="headerlink" href="#class-skillloader" title="Permanent link">&para;</a></h4>
<blockquote>
<p>OpenClaw-style skill loader.</p>
</blockquote>
<ul>
<li><code>scan(cls)</code>
  ‚Äî Scan skills directory, return list of available skills.</li>
<li><code>load(cls, skill_name)</code>
  ‚Äî Load a skill's SKILL.md content.</li>
<li><code>match(cls, user_message)</code>
  ‚Äî Auto-detect which skill matches the user's request. Returns skill content or None.</li>
<li><code>install(cls, url)</code>
  ‚Äî Install a skill from a Git URL or GitHub shorthand (user/repo).</li>
<li><code>uninstall(cls, skill_name)</code>
  ‚Äî Remove a skill directory.</li>
</ul>
<h3 id="salmalmfeaturesartifacts"><code>salmalm.features.artifacts</code><a class="headerlink" href="#salmalmfeaturesartifacts" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Conversation Artifacts ‚Äî auto-detect and save code/docs/JSON from conversations.</p>
</blockquote>
<h4 id="class-artifacttype"><code>class ArtifactType</code><a class="headerlink" href="#class-artifacttype" title="Permanent link">&para;</a></h4>
<h4 id="class-artifact"><code>class Artifact</code><a class="headerlink" href="#class-artifact" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Single artifact.</p>
</blockquote>
<ul>
<li><code>to_dict()</code>
  ‚Äî To dict.</li>
<li><code>from_dict(cls, d)</code>
  ‚Äî From dict.</li>
</ul>
<h4 id="class-artifactmanager"><code>class ArtifactManager</code><a class="headerlink" href="#class-artifactmanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Manage conversation artifacts.</p>
</blockquote>
<ul>
<li><code>add(type, content, language, session_id, metadata)</code>
  ‚Äî Add an artifact.</li>
<li><code>get(artifact_id)</code>
  ‚Äî Get.</li>
<li><code>list_all(limit)</code>
  ‚Äî List all.</li>
<li><code>remove(artifact_id)</code>
  ‚Äî Remove.</li>
<li><code>export_all()</code>
  ‚Äî Export all artifacts as JSON string.</li>
<li><code>detect_and_save(text, session_id)</code>
  ‚Äî Auto-detect artifacts in text and save them.</li>
<li>
<p><code>count()</code>
  ‚Äî Count.</p>
</li>
<li>
<p><code>handle_artifacts_command(cmd, session)</code>
  ‚Äî Handle /artifacts list|get|export.</p>
</li>
<li><code>register_commands(router)</code>
  ‚Äî Register /artifacts commands.</li>
<li><code>register_tools(registry_module)</code>
  ‚Äî Register artifact tools.</li>
</ul>
<h3 id="salmalmfeaturesaudit_cron"><code>salmalm.features.audit_cron</code><a class="headerlink" href="#salmalmfeaturesaudit_cron" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Periodic audit checkpoint automation.</p>
</blockquote>
<ul>
<li><code>start_audit_cron(interval_hours)</code>
  ‚Äî Start periodic audit checkpoint. Safe to call multiple times (idempotent).</li>
<li><code>stop_audit_cron()</code>
  ‚Äî Cancel the audit checkpoint timer.</li>
</ul>
<h3 id="salmalmfeaturesbookmarks"><code>salmalm.features.bookmarks</code><a class="headerlink" href="#salmalmfeaturesbookmarks" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Message Bookmarks (Î©îÏãúÏßÄ Î∂ÅÎßàÌÅ¨) ‚Äî LobeChat style.</p>
</blockquote>
<h4 id="class-bookmarkmanager"><code>class BookmarkManager</code><a class="headerlink" href="#class-bookmarkmanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Manage message bookmarks across sessions.</p>
</blockquote>
<ul>
<li><code>add(session_id, message_index, content_preview, note, role)</code>
  ‚Äî Add.</li>
<li><code>remove(session_id, message_index)</code>
  ‚Äî Remove.</li>
<li><code>list_all(limit)</code>
  ‚Äî List all.</li>
<li><code>list_session(session_id)</code>
  ‚Äî List session.</li>
<li><code>is_bookmarked(session_id, message_index)</code>
  ‚Äî Is bookmarked.</li>
</ul>
<h3 id="salmalmfeaturesbriefing"><code>salmalm.features.briefing</code><a class="headerlink" href="#salmalmfeaturesbriefing" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Daily Briefing ‚Äî morning/evening summary generator.</p>
</blockquote>
<h4 id="class-dailybriefing"><code>class DailyBriefing</code><a class="headerlink" href="#class-dailybriefing" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Generate daily briefing summaries.</p>
</blockquote>
<ul>
<li><code>generate(sections)</code>
  ‚Äî Generate a full briefing. sections: list of section names to include.</li>
<li><code>configure(key, value)</code>
  ‚Äî Update briefing config.</li>
</ul>
<h3 id="salmalmfeaturescanvas"><code>salmalm.features.canvas</code><a class="headerlink" href="#salmalmfeaturescanvas" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Canvas ‚Äî local HTML preview and rendering.</p>
</blockquote>
<h4 id="class-canvasserver"><code>class CanvasServer</code><a class="headerlink" href="#class-canvasserver" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Lightweight HTTP server for previewing generated content.</p>
</blockquote>
<ul>
<li><code>start(port, host)</code>
  ‚Äî Start the canvas preview server.</li>
<li><code>stop()</code>
  ‚Äî Stop the canvas server.</li>
<li><code>present(html_content, title, open_browser)</code>
  ‚Äî Present HTML content on the canvas.</li>
<li><code>render_markdown(markdown_text, title)</code>
  ‚Äî Render markdown as HTML and present on canvas.</li>
<li><code>render_code(code, language, title)</code>
  ‚Äî Render code with syntax highlighting (basic CSS-based).</li>
<li><code>render_chart_svg(svg_content, title)</code>
  ‚Äî Render an SVG chart on canvas.</li>
<li><code>list_pages()</code>
  ‚Äî List all canvas pages.</li>
<li><code>get_status()</code>
  ‚Äî Get canvas server status.</li>
</ul>
<h3 id="salmalmfeaturescommands"><code>salmalm.features.commands</code><a class="headerlink" href="#salmalmfeaturescommands" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Extended slash command router (30+ commands).</p>
</blockquote>
<h4 id="class-commandrouter"><code>class CommandRouter</code><a class="headerlink" href="#class-commandrouter" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Central slash-command dispatcher.</p>
</blockquote>
<ul>
<li><code>register(command, handler)</code>
  ‚Äî Register exact-match command.</li>
<li><code>register_prefix(prefix, handler)</code>
  ‚Äî Register prefix-match command.</li>
<li><code>async dispatch(text, session)</code>
  ‚Äî Dispatch a command string. Returns response or None.</li>
<li><code>parse_directives(text)</code>
  ‚Äî Extract directive commands from message text.</li>
<li><code>find_inline_shortcuts(text)</code>
  ‚Äî Find inline shortcut commands within a message.</li>
<li>
<p><code>get_completions()</code>
  ‚Äî Return command list for autocomplete / /api/commands.</p>
</li>
<li>
<p><code>register_telegram_commands(bot_token)</code>
  ‚Äî Register commands with Telegram's setMyCommands API.</p>
</li>
<li><code>get_router(engine_dispatch)</code>
  ‚Äî Get router.</li>
</ul>
<h3 id="salmalmfeaturescompare"><code>salmalm.features.compare</code><a class="headerlink" href="#salmalmfeaturescompare" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Response Compare / Beam (ÏùëÎãµ ÎπÑÍµê) ‚Äî BIG-AGI style.</p>
</blockquote>
<ul>
<li><code>async compare_models(session_id, message, models)</code>
  ‚Äî Compare models.</li>
</ul>
<h3 id="salmalmfeaturesdashboard_life"><code>salmalm.features.dashboard_life</code><a class="headerlink" href="#salmalmfeaturesdashboard_life" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Life Dashboard ‚Äî one-page overview of personal data from existing tools.</p>
</blockquote>
<h4 id="class-lifedashboard"><code>class LifeDashboard</code><a class="headerlink" href="#class-lifedashboard" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Aggregates data from personal tools into a unified dashboard.</p>
</blockquote>
<ul>
<li><code>generate_dashboard()</code>
  ‚Äî Generate dashboard.</li>
<li><code>text_summary(section)</code>
  ‚Äî Text summary.</li>
<li><code>render_html()</code>
  ‚Äî Render html.</li>
</ul>
<h4 id="class-proactivedigest"><code>class ProactiveDigest</code><a class="headerlink" href="#class-proactivedigest" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Generates morning/evening digest messages.</p>
</blockquote>
<ul>
<li><code>morning_digest()</code>
  ‚Äî Morning digest.</li>
<li><code>evening_digest()</code>
  ‚Äî Evening digest.</li>
<li>
<p><code>should_send(hour)</code>
  ‚Äî Should send.</p>
</li>
<li>
<p><code>get_dashboard()</code>
  ‚Äî Get dashboard.</p>
</li>
<li><code>get_digest()</code>
  ‚Äî Get digest.</li>
</ul>
<h3 id="salmalmfeaturesdeadman"><code>salmalm.features.deadman</code><a class="headerlink" href="#salmalmfeaturesdeadman" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Dead Man's Switch ‚Äî triggers actions after prolonged user inactivity.</p>
</blockquote>
<h4 id="class-deadmanswitch"><code>class DeadManSwitch</code><a class="headerlink" href="#class-deadmanswitch" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Monitors user activity and triggers emergency actions on prolonged inactivity.</p>
</blockquote>
<ul>
<li><code>record_activity()</code>
  ‚Äî Record user activity (message or command).</li>
<li><code>reset()</code>
  ‚Äî Manually reset the timer.</li>
<li><code>status()</code>
  ‚Äî Return current switch status.</li>
<li><code>format_status()</code>
  ‚Äî Format status.</li>
<li><code>setup(inactivity_days, warning_hours, actions, confirmation_required)</code>
  ‚Äî Setup.</li>
<li><code>disable()</code>
  ‚Äî Disable.</li>
<li><code>check(send_fn, user_name)</code>
  ‚Äî Periodic check ‚Äî called from heartbeat.</li>
<li><code>confirm_alive()</code>
  ‚Äî User confirms they're alive after warning.</li>
<li><code>test(user_name)</code>
  ‚Äî Simulate activation without actually sending anything.</li>
<li><code>handle_command(args, send_fn, user_name)</code>
  ‚Äî Handle /deadman subcommands.</li>
</ul>
<h3 id="salmalmfeaturesdocs"><code>salmalm.features.docs</code><a class="headerlink" href="#salmalmfeaturesdocs" title="Permanent link">&para;</a></h3>
<ul>
<li><code>generate_api_docs_html()</code>
  ‚Äî Generate API documentation HTML page.</li>
</ul>
<h3 id="salmalmfeaturesdoctor"><code>salmalm.features.doctor</code><a class="headerlink" href="#salmalmfeaturesdoctor" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Doctor ‚Äî self-diagnosis and repair tool.</p>
</blockquote>
<h4 id="class-doctor"><code>class Doctor</code><a class="headerlink" href="#class-doctor" title="Permanent link">&para;</a></h4>
<blockquote>
<p>SalmAlm ÏûêÍ∞Ä ÏßÑÎã® + ÏàòÎ≥µ ÎèÑÍµ¨.</p>
</blockquote>
<ul>
<li><code>check_python_version()</code>
  ‚Äî Python Î≤ÑÏ†Ñ ÌôïÏù∏ (3.9+ ÌïÑÏàò).</li>
<li><code>check_crypto()</code>
  ‚Äî cryptography Ìå®ÌÇ§ÏßÄ ÏÑ§Ïπò Ïó¨Î∂Ä.</li>
<li><code>check_channels()</code>
  ‚Äî Telegram/Discord Î¥á ÌÜ†ÌÅ∞ Ïú†Ìö®ÏÑ±.</li>
<li><code>run_all(auto_fix)</code>
  ‚Äî Ï†ÑÏ≤¥ ÏßÑÎã® Ïã§Ìñâ, Í≤∞Í≥º Î¶¨Ïä§Ìä∏ Î∞òÌôò.</li>
<li><code>check_config_integrity()</code>
  ‚Äî ÏÑ§Ï†ï ÌååÏùº Ï°¥Ïû¨/Ïú†Ìö®ÏÑ±/Í∂åÌïú Í≤ÄÏÇ¨.</li>
<li><code>check_database_integrity()</code>
  ‚Äî SQLite DB Î¨¥Í≤∞ÏÑ± (PRAGMA integrity_check).</li>
<li><code>check_session_integrity()</code>
  ‚Äî ÏÑ∏ÏÖò ÌååÏùº Ï°¥Ïû¨/ÌÅ¨Í∏∞/ÏÜêÏÉÅ Í≤ÄÏÇ¨.</li>
<li><code>check_api_keys()</code>
  ‚Äî API ÌÇ§ ÏÑ§Ï†ï Ïó¨Î∂Ä + Ïã§Ï†ú Ïú†Ìö®ÏÑ± Í≤ÄÏ¶ù.</li>
<li><code>check_port_availability()</code>
  ‚Äî ÏÑúÎ≤Ñ Ìè¨Ìä∏ ÏÇ¨Ïö© Í∞ÄÎä• Ïó¨Î∂Ä.</li>
<li><code>check_disk_space()</code>
  ‚Äî ÎîîÏä§ÌÅ¨ Ïó¨Ïú† Í≥µÍ∞Ñ.</li>
</ul>
<h3 id="salmalmfeaturesedge_cases"><code>salmalm.features.edge_cases</code><a class="headerlink" href="#salmalmfeaturesedge_cases" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Backward-compatibility shim ‚Äî re-exports from decomposed modules.</p>
</blockquote>
<h3 id="salmalmfeaturesfile_upload"><code>salmalm.features.file_upload</code><a class="headerlink" href="#salmalmfeaturesfile_upload" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Enhanced File Upload (ÌååÏùº ÏóÖÎ°úÎìú Í∞ïÌôî) ‚Äî Open WebUI style.</p>
</blockquote>
<ul>
<li><code>validate_upload(filename, size_bytes)</code>
  ‚Äî Validate upload.</li>
<li><code>extract_pdf_text(data)</code>
  ‚Äî Extract pdf text.</li>
<li><code>process_uploaded_file(filename, data)</code>
  ‚Äî Process uploaded file.</li>
</ul>
<h3 id="salmalmfeaturesfocus"><code>salmalm.features.focus</code><a class="headerlink" href="#salmalmfeaturesfocus" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Focus Mode ‚Äî ÏßëÏ§ë Î™®Îìú.</p>
</blockquote>
<h4 id="class-focussession"><code>class FocusSession</code><a class="headerlink" href="#class-focussession" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Single focus session data.</p>
</blockquote>
<ul>
<li><code>active()</code>
  ‚Äî Active.</li>
<li><code>duration_seconds()</code>
  ‚Äî Duration seconds.</li>
<li><code>duration_str()</code>
  ‚Äî Duration str.</li>
<li><code>end()</code>
  ‚Äî End.</li>
<li><code>to_dict()</code>
  ‚Äî To dict.</li>
</ul>
<h4 id="class-focusmanager"><code>class FocusManager</code><a class="headerlink" href="#class-focusmanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>ÏßëÏ§ë Î™®Îìú Í¥ÄÎ¶¨Ïûê.</p>
</blockquote>
<ul>
<li><code>start(topic, user_id)</code>
  ‚Äî ÏßëÏ§ë Î™®Îìú ÏãúÏûë.</li>
<li><code>end(user_id)</code>
  ‚Äî ÏßëÏ§ë Î™®Îìú Ï¢ÖÎ£å.</li>
<li><code>is_focused(user_id)</code>
  ‚Äî ÌòÑÏû¨ ÏßëÏ§ë Î™®ÎìúÏù∏ÏßÄ.</li>
<li><code>get_topic(user_id)</code>
  ‚Äî ÌòÑÏû¨ ÏßëÏ§ë Ï£ºÏ†ú.</li>
<li><code>check_message(message, user_id)</code>
  ‚Äî Î©îÏãúÏßÄÍ∞Ä Ï£ºÏ†úÏôÄ Í¥ÄÎ†® ÏûàÎäîÏßÄ Ï≤¥ÌÅ¨.</li>
<li><code>status(user_id)</code>
  ‚Äî ÌòÑÏû¨ ÏÉÅÌÉú.</li>
<li>
<p><code>history_summary()</code>
  ‚Äî ÏÑ∏ÏÖò ÌûàÏä§ÌÜ†Î¶¨.</p>
</li>
<li>
<p><code>get_focus_manager()</code>
  ‚Äî Get focus manager.</p>
</li>
<li><code>async handle_focus_command(cmd, session)</code>
  ‚Äî Handle /focus commands.</li>
<li><code>register_focus_commands(command_router)</code>
  ‚Äî Register /focus command.</li>
<li><code>register_focus_tools()</code>
  ‚Äî Register focus tools.</li>
</ul>
<h3 id="salmalmfeaturesfork"><code>salmalm.features.fork</code><a class="headerlink" href="#salmalmfeaturesfork" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Conversation Fork / Regenerate (ÎåÄÌôî Ìè¨ÌÅ¨) ‚Äî LibreChat style.</p>
</blockquote>
<h4 id="class-conversationfork"><code>class ConversationFork</code><a class="headerlink" href="#class-conversationfork" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Manage alternative responses at the same message index.</p>
</blockquote>
<ul>
<li><code>save_alternative(session_id, message_index, content, model, active)</code>
  ‚Äî Save alternative.</li>
<li><code>get_alternatives(session_id, message_index)</code>
  ‚Äî Get alternatives.</li>
<li><code>switch_alternative(session_id, message_index, alt_id)</code>
  ‚Äî Switch alternative.</li>
<li><code>async regenerate(session_id, message_index)</code>
  ‚Äî Regenerate.</li>
</ul>
<h3 id="salmalmfeatureshabits"><code>salmalm.features.habits</code><a class="headerlink" href="#salmalmfeatureshabits" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Habit Tracker ‚Äî ÏùºÏùº ÏäµÍ¥Ä Ï∂îÏ†ÅÍ∏∞.</p>
</blockquote>
<h4 id="class-habittracker"><code>class HabitTracker</code><a class="headerlink" href="#class-habittracker" title="Permanent link">&para;</a></h4>
<blockquote>
<p>ÏäµÍ¥Ä Ï∂îÏ†ÅÍ∏∞.</p>
</blockquote>
<ul>
<li><code>conn()</code>
  ‚Äî Conn.</li>
<li><code>close()</code>
  ‚Äî Close.</li>
<li><code>add_habit(name)</code>
  ‚Äî ÏäµÍ¥Ä Îì±Î°ù.</li>
<li><code>remove_habit(name)</code>
  ‚Äî ÏäµÍ¥Ä ÏÇ≠Ï†ú (ÎπÑÌôúÏÑ±Ìôî).</li>
<li><code>check_habit(name, date)</code>
  ‚Äî Ïò§Îäò ÏôÑÎ£å ÌëúÏãú.</li>
<li><code>uncheck_habit(name, date)</code>
  ‚Äî ÏôÑÎ£å Ï∑®ÏÜå.</li>
<li><code>get_habits()</code>
  ‚Äî ÌôúÏÑ± ÏäµÍ¥Ä Î™©Î°ù.</li>
<li><code>stats(days)</code>
  ‚Äî Ï£ºÍ∞Ñ/ÏõîÍ∞Ñ ÌÜµÍ≥Ñ + streak.</li>
<li><code>monthly_stats()</code>
  ‚Äî ÏõîÍ∞Ñ ÌÜµÍ≥Ñ.</li>
<li>
<p><code>remind()</code>
  ‚Äî ÎØ∏ÏôÑÎ£å ÏäµÍ¥Ä ÏïåÎ¶º.</p>
</li>
<li>
<p><code>get_tracker(db_path)</code>
  ‚Äî Get tracker.</p>
</li>
<li><code>async handle_habit_command(cmd, session)</code>
  ‚Äî Handle /habit commands.</li>
<li><code>register_habit_commands(command_router)</code>
  ‚Äî Register /habit command with the command router.</li>
<li><code>register_habit_tools()</code>
  ‚Äî Register habit tools with the tool registry.</li>
</ul>
<h3 id="salmalmfeaturesheartbeat"><code>salmalm.features.heartbeat</code><a class="headerlink" href="#salmalmfeaturesheartbeat" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Heartbeat ‚Äî Cache warming for Anthropic prompt caching.</p>
</blockquote>
<h4 id="class-cachewarmer"><code>class CacheWarmer</code><a class="headerlink" href="#class-cachewarmer" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Periodically warm Anthropic prompt cache to prevent TTL expiry.</p>
</blockquote>
<ul>
<li><code>start()</code>
  ‚Äî Start the cache warming background thread.</li>
<li><code>stop()</code>
  ‚Äî Stop the cache warming thread.</li>
<li><code>stats()</code>
  ‚Äî Stats.</li>
</ul>
<h4 id="class-heartbeatmanager_1"><code>class HeartbeatManager</code><a class="headerlink" href="#class-heartbeatmanager_1" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Heartbeat manager with active hours support.</p>
</blockquote>
<ul>
<li><code>reload()</code>
  ‚Äî Reload.</li>
<li><code>config()</code>
  ‚Äî Config.</li>
<li><code>is_active_hours()</code>
  ‚Äî Check if current time is within active hours.</li>
<li>
<p><code>should_heartbeat()</code>
  ‚Äî Check if heartbeat should run now.</p>
</li>
<li>
<p><code>load_cache_config()</code>
  ‚Äî Load cache config from ~/.salmalm/cache.json.</p>
</li>
<li><code>save_cache_config(config)</code>
  ‚Äî Save cache config.</li>
</ul>
<h3 id="salmalmfeatureshooks"><code>salmalm.features.hooks</code><a class="headerlink" href="#salmalmfeatureshooks" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Hooks System ‚Äî Ïù¥Î≤§Ìä∏ ÌõÖ Îß§ÎãàÏ†Ä (Event Hook Manager).</p>
</blockquote>
<h4 id="class-hookmanager"><code>class HookManager</code><a class="headerlink" href="#class-hookmanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Manages event hooks ‚Äî loads config, fires hooks asynchronously.</p>
</blockquote>
<ul>
<li><code>reload()</code>
  ‚Äî Reload hooks from ~/.salmalm/hooks.json.</li>
<li><code>save()</code>
  ‚Äî Save current hooks config.</li>
<li><code>register_plugin_hook(event, callback)</code>
  ‚Äî Register a plugin callback for an event.</li>
<li><code>unregister_plugin_hooks(callbacks)</code>
  ‚Äî Remove specific plugin callbacks.</li>
<li><code>fire(event, context)</code>
  ‚Äî Fire an event ‚Äî runs all registered hooks asynchronously (non-blocking).</li>
<li><code>list_hooks()</code>
  ‚Äî Return all configured hooks.</li>
<li><code>test_hook(event)</code>
  ‚Äî Test-fire a hook event with dummy context.</li>
<li><code>add_hook(event, command)</code>
  ‚Äî Add a command to an event hook.</li>
<li><code>remove_hook(event, index)</code>
  ‚Äî Remove a hook command by event and index.</li>
</ul>
<h3 id="salmalmfeaturesjournal"><code>salmalm.features.journal</code><a class="headerlink" href="#salmalmfeaturesjournal" title="Permanent link">&para;</a></h3>
<blockquote>
<p>AI Journal ‚Äî AI ÏùºÏßÄ, Í∞êÏ†ï Î∂ÑÏÑù, ÌïòÎ£® ÏöîÏïΩ.</p>
</blockquote>
<h4 id="class-journalmanager"><code>class JournalManager</code><a class="headerlink" href="#class-journalmanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>AI ÏùºÏßÄ Í¥ÄÎ¶¨Ïûê.</p>
</blockquote>
<ul>
<li><code>conn()</code>
  ‚Äî Conn.</li>
<li><code>close()</code>
  ‚Äî Close.</li>
<li><code>write(text, date)</code>
  ‚Äî ÏùºÏßÄ ÏûëÏÑ±.</li>
<li><code>review(date)</code>
  ‚Äî ÌäπÏ†ï ÎÇ†Ïßú ÏùºÏßÄ Ï°∞Ìöå.</li>
<li><code>today()</code>
  ‚Äî Ïò§Îäò ÏùºÏßÄ Ï°∞Ìöå.</li>
<li><code>generate_today_summary(conversations)</code>
  ‚Äî Ïò§ÎäòÏùò ÎåÄÌôî Í∏∞Î∞ò ÏûêÎèô ÏùºÏßÄ ÏÉùÏÑ±.</li>
<li><code>mood_trend(days)</code>
  ‚Äî Í∞êÏ†ï Ìä∏Î†åÎìú Ï∞®Ìä∏ (ÌÖçÏä§Ìä∏ Í∏∞Î∞ò).</li>
<li><code>mood_from_mood_py(text)</code>
  ‚Äî Í∏∞Ï°¥ mood.py Ïó∞Îèô.</li>
<li>
<p><code>get_entries_for_date(date)</code>
  ‚Äî ÌäπÏ†ï ÎÇ†Ïßú ÏóîÌä∏Î¶¨ (APIÏö©).</p>
</li>
<li>
<p><code>get_journal(db_path)</code>
  ‚Äî Get journal.</p>
</li>
<li><code>async handle_journal_command(cmd, session)</code>
  ‚Äî Handle /journal commands.</li>
<li><code>register_journal_commands(command_router)</code>
  ‚Äî Register /journal command.</li>
<li><code>register_journal_tools()</code>
  ‚Äî Register journal tools.</li>
</ul>
<h3 id="salmalmfeaturesmcp"><code>salmalm.features.mcp</code><a class="headerlink" href="#salmalmfeaturesmcp" title="Permanent link">&para;</a></h3>
<h4 id="class-mcpserver"><code>class MCPServer</code><a class="headerlink" href="#class-mcpserver" title="Permanent link">&para;</a></h4>
<blockquote>
<p>MCP Server that exposes SalmAlm tools via JSON-RPC 2.0.</p>
</blockquote>
<ul>
<li><code>set_tools(tools, executor)</code>
  ‚Äî Register tools and their executor function.</li>
<li><code>async handle_message(msg)</code>
  ‚Äî Handle a single JSON-RPC message. Returns response or None for notifications.</li>
<li><code>async run_stdio()</code>
  ‚Äî Run MCP server on stdin/stdout (for subprocess transport).</li>
</ul>
<h4 id="class-mcpclientconnection"><code>class MCPClientConnection</code><a class="headerlink" href="#class-mcpclientconnection" title="Permanent link">&para;</a></h4>
<blockquote>
<p>A connection to a single external MCP server (stdio transport).</p>
</blockquote>
<ul>
<li><code>connect()</code>
  ‚Äî Start the MCP server subprocess and initialize.</li>
<li><code>disconnect()</code>
  ‚Äî Disconnect from an MCP server.</li>
<li><code>tools()</code>
  ‚Äî List all available tools from connected MCP servers.</li>
<li><code>call_tool(name, arguments, timeout)</code>
  ‚Äî Call a tool on the remote MCP server.</li>
<li><code>read_resource(uri)</code>
  ‚Äî Read a resource from the remote MCP server.</li>
</ul>
<h4 id="class-mcpmanager"><code>class MCPManager</code><a class="headerlink" href="#class-mcpmanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Manages multiple MCP client connections + the server instance.</p>
</blockquote>
<ul>
<li><code>server()</code>
  ‚Äî Get connection info for a specific MCP server.</li>
<li><code>add_server(name, command, env, cwd, auto_connect)</code>
  ‚Äî Add and optionally connect to an external MCP server.</li>
<li><code>remove_server(name)</code>
  ‚Äî Disconnect and remove an MCP server.</li>
<li><code>list_servers()</code>
  ‚Äî List all configured MCP servers and their status.</li>
<li><code>get_all_tools()</code>
  ‚Äî Get all tools from all connected MCP servers (for LLM tool lists).</li>
<li><code>call_tool(prefixed_name, arguments)</code>
  ‚Äî Call an MCP tool by its prefixed name (mcp_servername_toolname).</li>
<li><code>save_config()</code>
  ‚Äî Save server configurations to JSON.</li>
<li><code>load_config()</code>
  ‚Äî Load and auto-connect configured MCP servers.</li>
<li><code>shutdown()</code>
  ‚Äî Disconnect all clients.</li>
</ul>
<h3 id="salmalmfeaturesmcp_marketplace"><code>salmalm.features.mcp_marketplace</code><a class="headerlink" href="#salmalmfeaturesmcp_marketplace" title="Permanent link">&para;</a></h3>
<blockquote>
<p>MCP Marketplace ‚Äî catalog, install, manage MCP servers.</p>
</blockquote>
<h4 id="class-mcpmarketplace"><code>class MCPMarketplace</code><a class="headerlink" href="#class-mcpmarketplace" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Manage MCP server catalog, installation, and lifecycle.</p>
</blockquote>
<ul>
<li><code>install(name, params)</code>
  ‚Äî Install an MCP server from catalog.</li>
<li><code>remove(name)</code>
  ‚Äî Remove.</li>
<li><code>list_installed()</code>
  ‚Äî List installed.</li>
<li><code>catalog()</code>
  ‚Äî Catalog.</li>
<li><code>status()</code>
  ‚Äî Status.</li>
<li><code>search(query)</code>
  ‚Äî Search.</li>
<li><code>auto_connect_all(retries)</code>
  ‚Äî Connect all installed servers on startup.</li>
<li><code>get_catalog_json()</code>
  ‚Äî Return catalog for /api/mcp/catalog.</li>
<li><code>get_installed_json()</code>
  ‚Äî Return installed list for /api/mcp/installed.</li>
</ul>
<h3 id="salmalmfeaturesmesh"><code>salmalm.features.mesh</code><a class="headerlink" href="#salmalmfeaturesmesh" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Mesh ‚Äî peer-to-peer networking between SalmAlm instances.</p>
</blockquote>
<h4 id="class-meshpeer"><code>class MeshPeer</code><a class="headerlink" href="#class-meshpeer" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Represents a remote SalmAlm instance.</p>
</blockquote>
<ul>
<li><code>ping()</code>
  ‚Äî Check if peer is alive.</li>
<li><code>send_task(task, model)</code>
  ‚Äî Delegate a task to this peer.</li>
<li><code>send_clipboard(text)</code>
  ‚Äî Share clipboard content with peer.</li>
<li><code>get_status()</code>
  ‚Äî Get detailed status from peer.</li>
<li><code>to_dict()</code>
  ‚Äî To dict.</li>
</ul>
<h4 id="class-meshmanager"><code>class MeshManager</code><a class="headerlink" href="#class-meshmanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Manages peer-to-peer SalmAlm mesh network.</p>
</blockquote>
<ul>
<li><code>add_peer(url, name, secret)</code>
  ‚Äî Add a peer by URL. Returns status message.</li>
<li><code>remove_peer(peer_id)</code>
  ‚Äî Remove a peer.</li>
<li><code>list_peers()</code>
  ‚Äî List all peers with their status.</li>
<li><code>ping_all()</code>
  ‚Äî Ping all peers and return status.</li>
<li><code>delegate_task(peer_id, task, model)</code>
  ‚Äî Send a task to a specific peer for execution.</li>
<li><code>broadcast_task(task, model)</code>
  ‚Äî Send task to all online peers (parallel execution).</li>
<li><code>share_clipboard(text)</code>
  ‚Äî Share clipboard with all online peers.</li>
<li><code>get_clipboard()</code>
  ‚Äî Get the latest shared clipboard content.</li>
<li><code>set_clipboard(text)</code>
  ‚Äî Set clipboard (called when receiving from a peer).</li>
<li><code>handle_ping()</code>
  ‚Äî Handle /api/mesh/ping ‚Äî return this instance's info.</li>
</ul>
<h3 id="salmalmfeaturesmessage_queue"><code>salmalm.features.message_queue</code><a class="headerlink" href="#salmalmfeaturesmessage_queue" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Message Queue ‚Äî OpenClaw-style offline message queue.</p>
</blockquote>
<h4 id="class-messagequeue"><code>class MessageQueue</code><a class="headerlink" href="#class-messagequeue" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Persistent message queue with retry and dead-letter support.</p>
</blockquote>
<ul>
<li><code>enqueue(session_id, message, priority, model_override, image_data)</code>
  ‚Äî Add a message to the queue when LLM is unavailable.</li>
<li><code>peek()</code>
  ‚Äî Get the next message without removing it.</li>
<li><code>dequeue()</code>
  ‚Äî Get and mark the next message as processing.</li>
<li><code>complete(entry_id, result)</code>
  ‚Äî Mark a queued message as completed.</li>
<li><code>fail(entry_id, error)</code>
  ‚Äî Mark a message as failed. Retry or move to dead letter.</li>
<li><code>set_drain_callback(callback)</code>
  ‚Äî Set the callback for draining queued messages.</li>
<li><code>async drain()</code>
  ‚Äî Process all queued messages (called when service recovers).</li>
<li><code>get_status()</code>
  ‚Äî Get queue status for /queue command.</li>
<li><code>clear()</code>
  ‚Äî Clear all queued messages. Returns count cleared.</li>
</ul>
<h3 id="salmalmfeaturesmodel_detect"><code>salmalm.features.model_detect</code><a class="headerlink" href="#salmalmfeaturesmodel_detect" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Model Auto-Detection (Î™®Îç∏ ÏûêÎèô Í∞êÏßÄ) ‚Äî Open WebUI style.</p>
</blockquote>
<h4 id="class-modeldetector"><code>class ModelDetector</code><a class="headerlink" href="#class-modeldetector" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Auto-detect available models from all configured providers.</p>
</blockquote>
<ul>
<li><code>detect_all(force)</code>
  ‚Äî Detect all.</li>
</ul>
<h3 id="salmalmfeaturesmood"><code>salmalm.features.mood</code><a class="headerlink" href="#salmalmfeaturesmood" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Mood-Aware Response ‚Äî detects user emotion and adjusts response tone.</p>
</blockquote>
<h4 id="class-mooddetector"><code>class MoodDetector</code><a class="headerlink" href="#class-mooddetector" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Detects user mood from text using keywords, patterns, and emoji.</p>
</blockquote>
<ul>
<li><code>enabled()</code>
  ‚Äî Enabled.</li>
<li><code>sensitivity()</code>
  ‚Äî Sensitivity.</li>
<li><code>set_mode(mode)</code>
  ‚Äî Set mood detection mode: on, off, sensitive.</li>
<li><code>detect(text)</code>
  ‚Äî Detect mood from text. Returns (mood, confidence 0.0-1.0).</li>
<li><code>get_tone_injection(mood)</code>
  ‚Äî Get tone injection string for system prompt.</li>
<li><code>record_mood(mood, confidence)</code>
  ‚Äî Record mood to history.</li>
<li><code>get_status(text)</code>
  ‚Äî Return current mood status.</li>
<li><code>generate_report(period)</code>
  ‚Äî Generate mood report for the given period.</li>
</ul>
<h3 id="salmalmfeaturesnodes"><code>salmalm.features.nodes</code><a class="headerlink" href="#salmalmfeaturesnodes" title="Permanent link">&para;</a></h3>
<h4 id="class-sshnode"><code>class SSHNode</code><a class="headerlink" href="#class-sshnode" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Remote node accessible via SSH.</p>
</blockquote>
<ul>
<li><code>run(command, timeout)</code>
  ‚Äî Execute command on remote node.</li>
<li><code>status()</code>
  ‚Äî Get node system status (CPU, memory, disk, uptime).</li>
<li><code>upload(local_path, remote_path)</code>
  ‚Äî Upload file via SCP.</li>
<li><code>download(remote_path, local_path)</code>
  ‚Äî Download file via SCP.</li>
<li><code>is_reachable()</code>
  ‚Äî Quick ping check.</li>
</ul>
<h4 id="class-httpnode"><code>class HTTPNode</code><a class="headerlink" href="#class-httpnode" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Remote node accessible via HTTP agent protocol.</p>
</blockquote>
<ul>
<li><code>run(command, timeout)</code>
  ‚Äî Execute a command on a remote node.</li>
<li><code>status()</code>
  ‚Äî Get the status of a remote node.</li>
<li><code>upload(local_path, remote_path)</code>
  ‚Äî Upload via HTTP (base64 in JSON ‚Äî for small files).</li>
<li><code>is_reachable()</code>
  ‚Äî Check if a remote node is reachable.</li>
</ul>
<h4 id="class-nodemanager"><code>class NodeManager</code><a class="headerlink" href="#class-nodemanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Manages all remote nodes.</p>
</blockquote>
<ul>
<li><code>load_config()</code>
  ‚Äî Load nodes from nodes.json.</li>
<li><code>save_config()</code>
  ‚Äî Save node configs to JSON.</li>
<li><code>add_ssh_node(name, host, user, port, key)</code>
  ‚Äî Add an SSH node.</li>
<li><code>add_http_node(name, url, token)</code>
  ‚Äî Add an HTTP agent node.</li>
<li><code>remove_node(name)</code>
  ‚Äî Remove a registered remote node.</li>
<li><code>get_node(name)</code>
  ‚Äî Get configuration for a specific node.</li>
<li><code>list_nodes()</code>
  ‚Äî List all nodes with basic status.</li>
<li><code>run_on(name, command, timeout)</code>
  ‚Äî Execute command on a specific node.</li>
<li><code>status_all()</code>
  ‚Äî Get status of all nodes.</li>
<li><code>wake_on_lan(mac_address, broadcast, port)</code>
  ‚Äî Send Wake-on-LAN magic packet.</li>
</ul>
<h4 id="class-gatewayregistry"><code>class GatewayRegistry</code><a class="headerlink" href="#class-gatewayregistry" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Gateway side: manages registered nodes that can execute tools remotely.</p>
</blockquote>
<ul>
<li><code>set_gateway_token(token)</code>
  ‚Äî Set the gateway authentication token. Nodes must provide this to register.</li>
<li><code>register(node_id, url, token, capabilities, name)</code>
  ‚Äî Register a node with the gateway. Requires auth_token if gateway_token is set.</li>
<li><code>heartbeat(node_id)</code>
  ‚Äî Update node heartbeat timestamp.</li>
<li><code>unregister(node_id)</code>
  ‚Äî Remove a node.</li>
<li><code>list_nodes()</code>
  ‚Äî List all registered nodes with status.</li>
<li><code>find_node(tool_name)</code>
  ‚Äî Find an online node that supports the given tool.</li>
<li><code>dispatch(node_id, tool_name, tool_args, timeout)</code>
  ‚Äî Dispatch a tool call to a specific node with HMAC-signed payloads.</li>
<li><code>dispatch_auto(tool_name, tool_args, timeout)</code>
  ‚Äî Auto-find a node for this tool and dispatch. Returns None if no node available.</li>
</ul>
<h4 id="class-nodeagent"><code>class NodeAgent</code><a class="headerlink" href="#class-nodeagent" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Node side: lightweight agent that receives and executes tool calls from gateway.</p>
</blockquote>
<ul>
<li><code>register()</code>
  ‚Äî Register this node with the gateway.</li>
<li><code>start_heartbeat(interval)</code>
  ‚Äî Start background heartbeat to gateway.</li>
<li><code>stop()</code>
  ‚Äî Stop the node manager and close connections.</li>
</ul>
<h3 id="salmalmfeaturesplayground"><code>salmalm.features.playground</code><a class="headerlink" href="#salmalmfeaturesplayground" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Code Playground ‚Äî ÏïàÏ†ÑÌïú ÏΩîÎìú Ïã§Ìñâ ÌôòÍ≤Ω.</p>
</blockquote>
<h4 id="class-codeplayground"><code>class CodePlayground</code><a class="headerlink" href="#class-codeplayground" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Í≤©Î¶¨Îêú ÏΩîÎìú Ïã§Ìñâ ÌôòÍ≤Ω.</p>
</blockquote>
<ul>
<li><code>conn()</code>
  ‚Äî Conn.</li>
<li><code>close()</code>
  ‚Äî Close.</li>
<li><code>run_python(code)</code>
  ‚Äî Python ÏΩîÎìú Ïã§Ìñâ (subprocess Í≤©Î¶¨).</li>
<li><code>run_js(code)</code>
  ‚Äî Node.js ÏΩîÎìú Ïã§Ìñâ.</li>
<li><code>history(limit)</code>
  ‚Äî Ïã§Ìñâ ÌûàÏä§ÌÜ†Î¶¨.</li>
<li><code>clear_history()</code>
  ‚Äî ÌûàÏä§ÌÜ†Î¶¨ ÏÇ≠Ï†ú.</li>
<li>
<p><code>format_result(record)</code>
  ‚Äî Ïã§Ìñâ Í≤∞Í≥º Ìè¨Îß∑.</p>
</li>
<li>
<p><code>get_playground(db_path)</code>
  ‚Äî Get playground.</p>
</li>
<li><code>async handle_play_command(cmd, session)</code>
  ‚Äî Handle /play commands.</li>
<li><code>register_play_commands(command_router)</code>
  ‚Äî Register /play command.</li>
<li><code>register_play_tools()</code>
  ‚Äî Register play tools.</li>
</ul>
<h3 id="salmalmfeaturesplugin_manager"><code>salmalm.features.plugin_manager</code><a class="headerlink" href="#salmalmfeaturesplugin_manager" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Plugin Architecture ‚Äî ÎîîÎ†âÌÜ†Î¶¨ Í∏∞Î∞ò ÌîåÎü¨Í∑∏Ïù∏ ÏãúÏä§ÌÖú.</p>
</blockquote>
<h4 id="class-plugininfo"><code>class PluginInfo</code><a class="headerlink" href="#class-plugininfo" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Metadata and runtime state for a loaded plugin.</p>
</blockquote>
<ul>
<li><code>to_dict()</code>
  ‚Äî To dict.</li>
</ul>
<h4 id="class-pluginmanager"><code>class PluginManager</code><a class="headerlink" href="#class-pluginmanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Manages directory-based plugins with tool registration and hook integration.</p>
</blockquote>
<ul>
<li><code>scan_and_load()</code>
  ‚Äî Scan ~/SalmAlm/plugins/ and load all valid plugins.</li>
<li><code>get_all_tools()</code>
  ‚Äî Return all tool definitions from enabled plugins.</li>
<li><code>list_plugins()</code>
  ‚Äî Return list of all plugins with their status.</li>
<li><code>enable(name)</code>
  ‚Äî Enable a plugin.</li>
<li><code>disable(name)</code>
  ‚Äî Disable a plugin.</li>
<li><code>reload_all()</code>
  ‚Äî Reload all plugins.</li>
</ul>
<h3 id="salmalmfeaturespresence"><code>salmalm.features.presence</code><a class="headerlink" href="#salmalmfeaturespresence" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Presence System ‚Äî Track connected clients.</p>
</blockquote>
<h4 id="class-presenceentry"><code>class PresenceEntry</code><a class="headerlink" href="#class-presenceentry" title="Permanent link">&para;</a></h4>
<ul>
<li><code>state()</code>
  ‚Äî State.</li>
<li><code>is_expired()</code>
  ‚Äî Is expired.</li>
<li><code>touch()</code>
  ‚Äî Update last activity and optional fields.</li>
<li><code>to_dict()</code>
  ‚Äî To dict.</li>
</ul>
<h4 id="class-presencemanager"><code>class PresenceManager</code><a class="headerlink" href="#class-presencemanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Track connected client instances with TTL-based expiry.</p>
</blockquote>
<ul>
<li><code>register(instance_id)</code>
  ‚Äî Register or update a client instance.</li>
<li><code>heartbeat(instance_id)</code>
  ‚Äî Update last activity for a client.</li>
<li><code>unregister(instance_id)</code>
  ‚Äî Unregister.</li>
<li><code>get(instance_id)</code>
  ‚Äî Get.</li>
<li><code>list_all(include_expired)</code>
  ‚Äî List all presence entries.</li>
<li><code>count()</code>
  ‚Äî Count.</li>
<li><code>count_by_state()</code>
  ‚Äî Count by state.</li>
<li><code>clear()</code>
  ‚Äî Clear.</li>
</ul>
<h3 id="salmalmfeaturesprompt_vars"><code>salmalm.features.prompt_vars</code><a class="headerlink" href="#salmalmfeaturesprompt_vars" title="Permanent link">&para;</a></h3>
<blockquote>
<p>System Prompt Variables (ÏãúÏä§ÌÖú ÌîÑÎ°¨ÌîÑÌä∏ Î≥ÄÏàò) ‚Äî LobeChat style.</p>
</blockquote>
<ul>
<li><code>substitute_prompt_variables(text, session_id, model, user)</code>
  ‚Äî Substitute prompt variables.</li>
</ul>
<h3 id="salmalmfeaturesprovider_health"><code>salmalm.features.provider_health</code><a class="headerlink" href="#salmalmfeaturesprovider_health" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Provider Health Check (ÌîÑÎ°úÎ∞îÏù¥Îçî ÏÉÅÌÉú ÌôïÏù∏) ‚Äî Open WebUI style.</p>
</blockquote>
<h4 id="class-providerhealthcheck"><code>class ProviderHealthCheck</code><a class="headerlink" href="#class-providerhealthcheck" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Check health of all configured LLM providers.</p>
</blockquote>
<ul>
<li><code>check_all(force)</code>
  ‚Äî Check all.</li>
</ul>
<h3 id="salmalmfeaturesqueue"><code>salmalm.features.queue</code><a class="headerlink" href="#salmalmfeaturesqueue" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Message Queue ‚Äî 5 queue modes for message handling during AI processing.</p>
</blockquote>
<h4 id="class-queuemode"><code>class QueueMode</code><a class="headerlink" href="#class-queuemode" title="Permanent link">&para;</a></h4>
<h4 id="class-queuedmessage"><code>class QueuedMessage</code><a class="headerlink" href="#class-queuedmessage" title="Permanent link">&para;</a></h4>
<h4 id="class-messagequeue_1"><code>class MessageQueue</code><a class="headerlink" href="#class-messagequeue_1" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Per-session message queue with configurable modes.</p>
</blockquote>
<ul>
<li><code>mode()</code>
  ‚Äî Mode.</li>
<li><code>mode(value)</code>
  ‚Äî Mode.</li>
<li><code>is_processing()</code>
  ‚Äî Is processing.</li>
<li><code>is_processing(value)</code>
  ‚Äî Is processing.</li>
<li><code>cancel_requested()</code>
  ‚Äî Cancel requested.</li>
<li><code>enqueue(text, session_id, user_id)</code>
  ‚Äî Add message to queue. Returns action dict for the caller.</li>
<li><code>drain()</code>
  ‚Äî Get all queued messages and clear the queue.</li>
<li><code>drain_as_context()</code>
  ‚Äî Drain queue and format as follow-up context string.</li>
<li><code>get_backlog()</code>
  ‚Äî Get and clear the backlog (steer-backlog mode).</li>
<li>
<p><code>pending_count()</code>
  ‚Äî Pending count.</p>
</li>
<li>
<p><code>get_queue(session_id, mode)</code>
  ‚Äî Get or create a message queue for a session.</p>
</li>
<li><code>set_queue_mode(session_id, mode)</code>
  ‚Äî Set queue mode for a session. Returns confirmation message.</li>
<li><code>queue_status(session_id)</code>
  ‚Äî Get queue status for a session.</li>
</ul>
<h3 id="salmalmfeaturesquick_actions"><code>salmalm.features.quick_actions</code><a class="headerlink" href="#salmalmfeaturesquick_actions" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Quick Actions ‚Äî ÏûêÏ£º ÏÇ¨Ïö©ÌïòÎäî ÏûëÏóÖÏùÑ Îã®Ï∂ïÌÇ§Î°ú Îì±Î°ù.</p>
</blockquote>
<h4 id="class-quickactionmanager"><code>class QuickActionManager</code><a class="headerlink" href="#class-quickactionmanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Îã®Ï∂ï Ïï°ÏÖò Í¥ÄÎ¶¨Ïûê.</p>
</blockquote>
<ul>
<li><code>conn()</code>
  ‚Äî Conn.</li>
<li><code>close()</code>
  ‚Äî Close.</li>
<li><code>set_dispatcher(dispatcher)</code>
  ‚Äî Set command dispatcher for executing chains.</li>
<li><code>add(name, commands, description)</code>
  ‚Äî Îã®Ï∂ï Ïï°ÏÖò Îì±Î°ù.</li>
<li><code>remove(name)</code>
  ‚Äî Ïï°ÏÖò ÏÇ≠Ï†ú.</li>
<li><code>get(name)</code>
  ‚Äî Ïï°ÏÖò Ï°∞Ìöå.</li>
<li><code>list_all()</code>
  ‚Äî Î™©Î°ù.</li>
<li><code>async run(name, dispatcher)</code>
  ‚Äî Ïï°ÏÖò Ïã§Ìñâ.</li>
<li>
<p><code>rename(old_name, new_name)</code>
  ‚Äî Ïï°ÏÖò Ïù¥Î¶Ñ Î≥ÄÍ≤Ω.</p>
</li>
<li>
<p><code>get_qa(db_path)</code>
  ‚Äî Get qa.</p>
</li>
<li><code>async handle_qa_command(cmd, session)</code>
  ‚Äî Handle /qa commands.</li>
<li><code>register_qa_commands(command_router)</code>
  ‚Äî Register /qa command.</li>
<li><code>register_qa_tools()</code>
  ‚Äî Register qa tools.</li>
</ul>
<h3 id="salmalmfeaturesrag"><code>salmalm.features.rag</code><a class="headerlink" href="#salmalmfeaturesrag" title="Permanent link">&para;</a></h3>
<h4 id="class-ragengine"><code>class RAGEngine</code><a class="headerlink" href="#class-ragengine" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Hybrid BM25 + TF-IDF vector retrieval engine with persistent SQLite index.</p>
</blockquote>
<ul>
<li><code>config()</code>
  ‚Äî Config.</li>
<li><code>index_file(label, fpath)</code>
  ‚Äî Index a single file.</li>
<li><code>reindex(force)</code>
  ‚Äî Rebuild the index from source files.</li>
<li><code>search(query, max_results, min_score)</code>
  ‚Äî Hybrid search (BM25 + Vector). Returns list of {score, source, line, text}.</li>
<li><code>build_context(query, max_chars, max_results)</code>
  ‚Äî Build a context string for RAG injection into LLM prompts.</li>
<li><code>get_stats()</code>
  ‚Äî Return index statistics.</li>
<li>
<p><code>close()</code>
  ‚Äî Close the RAG database connection.</p>
</li>
<li>
<p><code>inject_rag_context(messages, system_prompt, max_chars)</code>
  ‚Äî Analyze recent messages and inject relevant RAG context into system prompt.</p>
</li>
<li><code>brave_augment_context(query, max_chars)</code>
  ‚Äî Augment RAG context with Brave LLM Context API when local results are thin.</li>
</ul>
<h3 id="salmalmfeaturesrag_embeddings"><code>salmalm.features.rag_embeddings</code><a class="headerlink" href="#salmalmfeaturesrag_embeddings" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Embedding-based vector search using AI provider APIs.</p>
</blockquote>
<ul>
<li><code>get_available_provider()</code>
  ‚Äî Return first available embedding provider or None.</li>
<li><code>get_embedding(text, provider, conn)</code>
  ‚Äî Get embedding for text, using cache if available.</li>
<li><code>batch_embed(texts, provider, conn)</code>
  ‚Äî Batch embed texts. Returns list of (embedding, provider) or None for failures.</li>
<li><code>cosine_similarity_vec(a, b)</code>
  ‚Äî Cosine similarity between two dense float vectors. Pure Python.</li>
</ul>
<h3 id="salmalmfeaturesrag_indexer"><code>salmalm.features.rag_indexer</code><a class="headerlink" href="#salmalmfeaturesrag_indexer" title="Permanent link">&para;</a></h3>
<blockquote>
<p>RAG indexing methods mixin.</p>
</blockquote>
<h4 id="class-ragindexermixin"><code>class RAGIndexerMixin</code><a class="headerlink" href="#class-ragindexermixin" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Mixin for RAG indexing operations.</p>
</blockquote>
<h3 id="salmalmfeaturesrag_utils"><code>salmalm.features.rag_utils</code><a class="headerlink" href="#salmalmfeaturesrag_utils" title="Permanent link">&para;</a></h3>
<blockquote>
<p>RAG utility functions: tokenization, stemming, similarity.</p>
</blockquote>
<ul>
<li><code>decompose_jamo(text)</code>
  ‚Äî Decompose Korean syllables into jamo (Ï¥àÏÑ±/Ï§ëÏÑ±/Ï¢ÖÏÑ±).</li>
<li><code>simple_stem(word)</code>
  ‚Äî Simple English suffix stripping.</li>
<li><code>expand_query(tokens)</code>
  ‚Äî Expand query tokens with synonyms.</li>
<li><code>load_rag_config(config_path)</code>
  ‚Äî Load rag.json config, falling back to defaults.</li>
<li><code>compute_tf(tokens)</code>
  ‚Äî Compute term frequency vector (normalized).</li>
<li><code>cosine_similarity_vec(a, b)</code>
  ‚Äî Cosine similarity between two dense float vectors. Pure Python, no numpy.</li>
<li><code>cosine_similarity(v1, v2)</code>
  ‚Äî Cosine similarity between two sparse vectors (dict-based).</li>
</ul>
<h3 id="salmalmfeaturesscreen_capture"><code>salmalm.features.screen_capture</code><a class="headerlink" href="#salmalmfeaturesscreen_capture" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Screen capture and Computer Use module.</p>
</blockquote>
<h4 id="class-screencapture"><code>class ScreenCapture</code><a class="headerlink" href="#class-screencapture" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Platform-aware screen capture using native tools.</p>
</blockquote>
<ul>
<li><code>capture_screen()</code>
  ‚Äî Capture screen and return PNG bytes.</li>
<li><code>ocr_image(image_path)</code>
  ‚Äî Run OCR on image using tesseract if available.</li>
<li><code>image_to_base64(png_bytes)</code>
  ‚Äî Image to base64.</li>
<li><code>capture_and_analyze(llm_func)</code>
  ‚Äî Capture screen and optionally analyze with LLM Vision.</li>
</ul>
<h4 id="class-screenhistory"><code>class ScreenHistory</code><a class="headerlink" href="#class-screenhistory" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Manages periodic capture history (Rewind-style).</p>
</blockquote>
<ul>
<li><code>save_capture(png_bytes, ocr_text)</code>
  ‚Äî Save a capture to history.</li>
<li><code>get_history(n)</code>
  ‚Äî Get most recent N captures.</li>
<li><code>search(query)</code>
  ‚Äî Search captures by OCR text.</li>
<li><code>start_watching()</code>
  ‚Äî Start periodic capture.</li>
<li><code>stop_watching()</code>
  ‚Äî Stop watching.</li>
</ul>
<h4 id="class-screenmanager"><code>class ScreenManager</code><a class="headerlink" href="#class-screenmanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>High-level interface for /screen commands.</p>
</blockquote>
<ul>
<li><code>capture(llm_func)</code>
  ‚Äî Capture.</li>
<li><code>watch(toggle)</code>
  ‚Äî Watch.</li>
<li><code>history(n)</code>
  ‚Äî History.</li>
<li><code>search(query)</code>
  ‚Äî Search.</li>
</ul>
<h3 id="salmalmfeaturesself_evolve"><code>salmalm.features.self_evolve</code><a class="headerlink" href="#salmalmfeaturesself_evolve" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Self-Evolving Prompt ‚Äî learns user preferences from conversation patterns.</p>
</blockquote>
<h4 id="class-patternanalyzer"><code>class PatternAnalyzer</code><a class="headerlink" href="#class-patternanalyzer" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Analyzes conversation patterns using pure Python heuristics.</p>
</blockquote>
<ul>
<li><code>analyze_length_preference(messages)</code>
  ‚Äî Analyze if user prefers concise or detailed responses.</li>
<li><code>analyze_time_patterns(messages)</code>
  ‚Äî Analyze conversation tone by time of day.</li>
<li><code>analyze_topic_frequency(messages)</code>
  ‚Äî Count topic categories from messages.</li>
<li><code>analyze_language_ratio(messages)</code>
  ‚Äî Analyze Korean vs English ratio. 0.0=all EN, 1.0=all KR.</li>
<li><code>analyze_feedback_signals(messages)</code>
  ‚Äî Detect positive/negative feedback patterns.</li>
<li><code>analyze_code_comment_preference(messages)</code>
  ‚Äî Detect if user prefers or dislikes code comments.</li>
</ul>
<h4 id="class-promptevolver"><code>class PromptEvolver</code><a class="headerlink" href="#class-promptevolver" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Learns user preferences and evolves the system prompt over time.</p>
</blockquote>
<ul>
<li><code>record_conversation(messages)</code>
  ‚Äî Record a conversation for pattern analysis.</li>
<li><code>should_suggest_evolution()</code>
  ‚Äî Check if we should suggest evolving SOUL.md.</li>
<li><code>generate_rules()</code>
  ‚Äî Generate auto-evolution rules from learned preferences.</li>
<li><code>apply_to_soul(soul_path)</code>
  ‚Äî Apply auto-evolved rules to SOUL.md. Returns status message.</li>
<li><code>get_status()</code>
  ‚Äî Return current evolution status.</li>
<li><code>get_history()</code>
  ‚Äî Return evolution history.</li>
<li><code>reset()</code>
  ‚Äî Reset all evolution data.</li>
</ul>
<h3 id="salmalmfeaturessession_groups"><code>salmalm.features.session_groups</code><a class="headerlink" href="#salmalmfeaturessession_groups" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Session Groups (ÎåÄÌôî Ï£ºÏ†ú Í∑∏Î£π) ‚Äî LobeChat style.</p>
</blockquote>
<h4 id="class-sessiongroupmanager"><code>class SessionGroupManager</code><a class="headerlink" href="#class-sessiongroupmanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Manage session groups/folders for organizing conversations.</p>
</blockquote>
<ul>
<li><code>list_groups()</code>
  ‚Äî List groups.</li>
<li><code>create_group(name, color)</code>
  ‚Äî Create group.</li>
<li><code>update_group(group_id)</code>
  ‚Äî Update group.</li>
<li><code>delete_group(group_id)</code>
  ‚Äî Delete group.</li>
<li><code>move_session(session_id, group_id)</code>
  ‚Äî Move session.</li>
</ul>
<h3 id="salmalmfeaturesshadow"><code>salmalm.features.shadow</code><a class="headerlink" href="#salmalmfeaturesshadow" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Shadow Mode ‚Äî learn user style and proxy-reply when absent.</p>
</blockquote>
<h4 id="class-shadowmode"><code>class ShadowMode</code><a class="headerlink" href="#class-shadowmode" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Learn user messaging style and generate proxy replies when absent.</p>
</blockquote>
<ul>
<li><code>learn(messages)</code>
  ‚Äî Analyse <em>user</em> messages and build a style profile.</li>
<li><code>build_proxy_prompt(incoming_message)</code>
  ‚Äî Build an LLM system prompt that mimics the user's style.</li>
<li><code>generate_proxy_response(incoming_message, confidence)</code>
  ‚Äî Generate a proxy response. If confidence is below threshold, return a polite away message.</li>
<li><code>should_proxy()</code>
  ‚Äî Return True if shadow mode is active and profile exists.</li>
<li><code>handle_command(args, session_messages)</code>
  ‚Äî Handle /shadow subcommands. Returns response text.</li>
</ul>
<h3 id="salmalmfeaturessla"><code>salmalm.features.sla</code><a class="headerlink" href="#salmalmfeaturessla" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm SLA Engine ‚Äî Uptime monitoring, latency tracking, watchdog.</p>
</blockquote>
<h4 id="class-slaconfig"><code>class SLAConfig</code><a class="headerlink" href="#class-slaconfig" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Runtime-reloadable SLA configuration from ~/.salmalm/sla.json.</p>
</blockquote>
<ul>
<li><code>load()</code>
  ‚Äî Load config from disk. Creates default if missing.</li>
<li><code>save()</code>
  ‚Äî Write current config to disk.</li>
<li><code>get(key, default)</code>
  ‚Äî Get.</li>
<li><code>set(key, value)</code>
  ‚Äî Set.</li>
<li><code>get_all()</code>
  ‚Äî Get all.</li>
<li><code>update(data)</code>
  ‚Äî Update.</li>
</ul>
<h4 id="class-uptimemonitor"><code>class UptimeMonitor</code><a class="headerlink" href="#class-uptimemonitor" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Track server uptime, detect crashes, log downtime events.</p>
</blockquote>
<ul>
<li><code>init_db()</code>
  ‚Äî Create uptime_log table if not exists.</li>
<li><code>on_startup()</code>
  ‚Äî Called at server startup: check lockfile, record crash if needed.</li>
<li><code>on_shutdown()</code>
  ‚Äî Called on graceful shutdown: remove lockfile.</li>
<li><code>record_downtime(start, end, duration, reason)</code>
  ‚Äî Manually record a downtime event.</li>
<li><code>get_uptime_seconds()</code>
  ‚Äî Get uptime seconds.</li>
<li><code>get_uptime_human()</code>
  ‚Äî Get uptime human.</li>
<li><code>get_monthly_uptime_pct(year, month)</code>
  ‚Äî Calculate uptime percentage for a given month.</li>
<li><code>get_daily_uptime_pct(date_str)</code>
  ‚Äî Calculate uptime percentage for a given day.</li>
<li><code>get_recent_incidents(limit)</code>
  ‚Äî Get recent downtime incidents.</li>
<li><code>get_stats()</code>
  ‚Äî Full uptime stats for API/dashboard.</li>
</ul>
<h4 id="class-latencytracker"><code>class LatencyTracker</code><a class="headerlink" href="#class-latencytracker" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Track TTFT and total response time with ring buffer.</p>
</blockquote>
<ul>
<li><code>record(ttft_ms, total_ms, model, timed_out, session_id)</code>
  ‚Äî Record a single request's latency.</li>
<li><code>should_failover()</code>
  ‚Äî Check if consecutive timeouts warrant a model failover.</li>
<li><code>reset_timeout_counter()</code>
  ‚Äî Reset timeout counter.</li>
<li><code>get_stats()</code>
  ‚Äî Get latency statistics: P50/P95/P99 + histogram.</li>
</ul>
<h4 id="class-watchdog"><code>class Watchdog</code><a class="headerlink" href="#class-watchdog" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Background watchdog: periodic self-diagnosis + auto-recovery.</p>
</blockquote>
<ul>
<li><code>start()</code>
  ‚Äî Start watchdog background thread.</li>
<li><code>stop()</code>
  ‚Äî Stop watchdog.</li>
<li><code>get_last_report()</code>
  ‚Äî Get the most recent watchdog report.</li>
<li><code>get_detailed_health()</code>
  ‚Äî Detailed health report for /health detail command.</li>
</ul>
<h3 id="salmalmfeaturessmart_paste"><code>salmalm.features.smart_paste</code><a class="headerlink" href="#salmalmfeaturessmart_paste" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Smart Paste (Ïä§ÎßàÌä∏ Î∂ôÏó¨ÎÑ£Í∏∞) ‚Äî BIG-AGI style.</p>
</blockquote>
<ul>
<li><code>detect_paste_type(text)</code>
  ‚Äî Detect paste type.</li>
</ul>
<h3 id="salmalmfeaturessplit_response"><code>salmalm.features.split_response</code><a class="headerlink" href="#salmalmfeaturessplit_response" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm A/B Split Response ‚Äî dual-perspective answers.</p>
</blockquote>
<h4 id="class-splitresponder"><code>class SplitResponder</code><a class="headerlink" href="#class-splitresponder" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Generate dual-perspective responses for a single question.</p>
</blockquote>
<ul>
<li><code>available_modes()</code>
  ‚Äî Available modes.</li>
<li><code>should_suggest_split(text)</code>
  ‚Äî Check if the text contains patterns suggesting a split response.</li>
<li><code>set_custom(label_a, label_b, prompt_a, prompt_b)</code>
  ‚Äî Set custom.</li>
<li><code>async generate(question, mode)</code>
  ‚Äî Generate split responses. Returns dict with responses and metadata.</li>
<li><code>format_result(result)</code>
  ‚Äî Format split result for display.</li>
<li><code>format_buttons()</code>
  ‚Äî Return inline button descriptors.</li>
<li><code>suggest_button()</code>
  ‚Äî Return a 'suggest split' inline button descriptor.</li>
<li><code>async merge(result)</code>
  ‚Äî Merge two perspectives into a combined response.</li>
<li><code>async continue_with(result, choice, follow_up)</code>
  ‚Äî Continue conversation with the chosen perspective.</li>
<li><code>handle_command(args)</code>
  ‚Äî Handle /split subcommands (sync wrapper). Returns text.</li>
</ul>
<h3 id="salmalmfeaturesstability"><code>salmalm.features.stability</code><a class="headerlink" href="#salmalmfeaturesstability" title="Permanent link">&para;</a></h3>
<h4 id="class-circuitbreaker"><code>class CircuitBreaker</code><a class="headerlink" href="#class-circuitbreaker" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Track error rates per component. Trip after threshold.</p>
</blockquote>
<ul>
<li><code>record_error(component, error)</code>
  ‚Äî Record an error for a component.</li>
<li><code>record_success(component)</code>
  ‚Äî Record successful operation ‚Äî helps reset breaker.</li>
<li><code>is_tripped(component)</code>
  ‚Äî Check if circuit breaker is open (too many errors).</li>
<li><code>get_status()</code>
  ‚Äî Get all component statuses.</li>
</ul>
<h4 id="class-healthmonitor"><code>class HealthMonitor</code><a class="headerlink" href="#class-healthmonitor" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Comprehensive health monitoring and auto-recovery.</p>
</blockquote>
<ul>
<li><code>check_health()</code>
  ‚Äî Run comprehensive health check. Returns health report.</li>
<li><code>async auto_recover()</code>
  ‚Äî Attempt to recover crashed components.</li>
<li>
<p><code>startup_selftest()</code>
  ‚Äî Run self-test on startup to verify all modules.</p>
</li>
<li>
<p><code>async watchdog_tick(monitor)</code>
  ‚Äî Periodic watchdog check ‚Äî run via cron every 5 minutes.</p>
</li>
</ul>
<h3 id="salmalmfeaturesstt"><code>salmalm.features.stt</code><a class="headerlink" href="#salmalmfeaturesstt" title="Permanent link">&para;</a></h3>
<blockquote>
<p>STT (Speech-to-Text) Manager ‚Äî voice input via Web Speech API and OpenAI Whisper.</p>
</blockquote>
<h4 id="class-sttmanager"><code>class STTManager</code><a class="headerlink" href="#class-sttmanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Speech-to-text manager supporting Web Speech API and OpenAI Whisper.</p>
</blockquote>
<ul>
<li><code>enabled()</code>
  ‚Äî Enabled.</li>
<li><code>web_enabled()</code>
  ‚Äî Web enabled.</li>
<li><code>telegram_voice()</code>
  ‚Äî Telegram voice.</li>
<li><code>get_web_js()</code>
  ‚Äî Return JavaScript snippet for Web Speech API integration.</li>
<li><code>transcribe(audio_data, filename, content_type)</code>
  ‚Äî Transcribe audio using OpenAI Whisper API. Returns text or error.</li>
<li><code>handle_telegram_voice(file_data, file_name)</code>
  ‚Äî Process a Telegram voice message. Returns transcribed text or None.</li>
</ul>
<h3 id="salmalmfeaturessubagents"><code>salmalm.features.subagents</code><a class="headerlink" href="#salmalmfeaturessubagents" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Sub-agent system: spawn isolated AI workers for parallel tasks.</p>
</blockquote>
<h4 id="class-subagenttask"><code>class SubAgentTask</code><a class="headerlink" href="#class-subagenttask" title="Permanent link">&para;</a></h4>
<blockquote>
<p>A sub-agent task definition.</p>
</blockquote>
<ul>
<li><code>elapsed_s()</code>
  ‚Äî Elapsed s.</li>
<li><code>to_dict()</code>
  ‚Äî To dict.</li>
</ul>
<h4 id="class-subagentmanager"><code>class SubAgentManager</code><a class="headerlink" href="#class-subagentmanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Manages sub-agent lifecycle: spawn, monitor, kill, collect results.</p>
</blockquote>
<ul>
<li><code>spawn(description, model, thinking_level, label, max_turns)</code>
  ‚Äî Spawn a new sub-agent task.</li>
<li><code>list_tasks(include_completed)</code>
  ‚Äî List all tasks.</li>
<li><code>get_task(task_id)</code>
  ‚Äî Get task by ID.</li>
<li><code>kill(task_id)</code>
  ‚Äî Kill a running sub-agent.</li>
<li><code>kill_all()</code>
  ‚Äî Kill all running sub-agents.</li>
<li><code>steer(task_id, message)</code>
  ‚Äî Send a steering message to a running or completed sub-agent.</li>
<li><code>collect_results(parent_session)</code>
  ‚Äî Collect all completed results for a parent session (OpenClaw push-style).</li>
</ul>
<h3 id="salmalmfeaturessummary_card"><code>salmalm.features.summary_card</code><a class="headerlink" href="#salmalmfeaturessummary_card" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Conversation Summary Card (ÎåÄÌôî ÏöîÏïΩ Ïπ¥Îìú) ‚Äî BIG-AGI style.</p>
</blockquote>
<ul>
<li><code>get_summary_card(session_id)</code>
  ‚Äî Get summary card.</li>
</ul>
<h3 id="salmalmfeaturestemplates_chat"><code>salmalm.features.templates_chat</code><a class="headerlink" href="#salmalmfeaturestemplates_chat" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Conversation Templates ‚Äî predefined chat templates with system prompts.</p>
</blockquote>
<h4 id="class-template"><code>class Template</code><a class="headerlink" href="#class-template" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Chat template.</p>
</blockquote>
<ul>
<li><code>to_dict()</code>
  ‚Äî To dict.</li>
<li><code>from_dict(cls, d)</code>
  ‚Äî From dict.</li>
<li><code>to_yaml()</code>
  ‚Äî Serialize to simple YAML-like format.</li>
</ul>
<h4 id="class-templatemanager"><code>class TemplateManager</code><a class="headerlink" href="#class-templatemanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Manage conversation templates.</p>
</blockquote>
<ul>
<li><code>list_templates()</code>
  ‚Äî List templates.</li>
<li><code>get(name)</code>
  ‚Äî Get.</li>
<li><code>use(name)</code>
  ‚Äî Activate a template. Returns template or None.</li>
<li><code>active()</code>
  ‚Äî Active.</li>
<li><code>deactivate()</code>
  ‚Äî Deactivate.</li>
<li><code>create(name, system_prompt, description, tools, tags)</code>
  ‚Äî Create and save a custom template.</li>
<li>
<p><code>remove(name)</code>
  ‚Äî Remove.</p>
</li>
<li>
<p><code>handle_template_command(cmd, session)</code>
  ‚Äî Handle /template list|use|create.</p>
</li>
<li><code>register_commands(router)</code>
  ‚Äî Register /template commands.</li>
<li><code>register_tools(registry_module)</code>
  ‚Äî Register template tools.</li>
</ul>
<h3 id="salmalmfeaturesthoughts"><code>salmalm.features.thoughts</code><a class="headerlink" href="#salmalmfeaturesthoughts" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Thought Stream ‚Äî quick thought capture with SQLite storage and RAG integration.</p>
</blockquote>
<h4 id="class-thoughtstream"><code>class ThoughtStream</code><a class="headerlink" href="#class-thoughtstream" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Quick thought capture with SQLite storage.</p>
</blockquote>
<ul>
<li><code>add(content, mood)</code>
  ‚Äî Add a thought. Returns the thought ID.</li>
<li><code>list_recent(n)</code>
  ‚Äî List most recent N thoughts.</li>
<li><code>search(query)</code>
  ‚Äî Search thoughts using RAG or simple LIKE.</li>
<li><code>by_tag(tag)</code>
  ‚Äî Filter thoughts by tag.</li>
<li><code>timeline(date_str)</code>
  ‚Äî Get thoughts for a specific date (YYYY-MM-DD). Defaults to today.</li>
<li><code>stats()</code>
  ‚Äî Get thought statistics.</li>
<li><code>export_markdown()</code>
  ‚Äî Export all thoughts as Markdown.</li>
<li><code>delete(thought_id)</code>
  ‚Äî Delete a thought by ID.</li>
</ul>
<h3 id="salmalmfeaturestimecapsule"><code>salmalm.features.timecapsule</code><a class="headerlink" href="#salmalmfeaturestimecapsule" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Time Capsule ‚Äî schedule messages to your future self.</p>
</blockquote>
<h4 id="class-timecapsule"><code>class TimeCapsule</code><a class="headerlink" href="#class-timecapsule" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Manages time capsules stored in SQLite.</p>
</blockquote>
<ul>
<li><code>create(date_text, message, channel)</code>
  ‚Äî Create a new time capsule.</li>
<li><code>list_pending()</code>
  ‚Äî List capsules not yet delivered.</li>
<li><code>list_delivered()</code>
  ‚Äî List already delivered capsules.</li>
<li><code>peek(capsule_id)</code>
  ‚Äî Peek at a capsule (spoiler warning).</li>
<li><code>cancel(capsule_id)</code>
  ‚Äî Cancel (delete) a pending capsule.</li>
<li><code>get_due_capsules(today)</code>
  ‚Äî Get capsules due for delivery today.</li>
<li><code>mark_delivered(capsule_id)</code>
  ‚Äî Mark a capsule as delivered.</li>
<li><code>deliver_due(send_fn, today)</code>
  ‚Äî Deliver all due capsules. Returns list of delivery results.</li>
<li><code>handle_command(args, channel)</code>
  ‚Äî Handle /capsule subcommands.</li>
</ul>
<h3 id="salmalmfeaturestranscript_hygiene"><code>salmalm.features.transcript_hygiene</code><a class="headerlink" href="#salmalmfeaturestranscript_hygiene" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Transcript Hygiene ‚Äî provider-specific session history sanitization.</p>
</blockquote>
<h4 id="class-transcripthygiene"><code>class TranscriptHygiene</code><a class="headerlink" href="#class-transcripthygiene" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Clean conversation history per provider rules before LLM API calls.</p>
</blockquote>
<ul>
<li><code>clean(messages)</code>
  ‚Äî Return a sanitized copy of messages. Original is never modified.</li>
</ul>
<h3 id="salmalmfeaturestray"><code>salmalm.features.tray</code><a class="headerlink" href="#salmalmfeaturestray" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Windows System Tray for SalmAlm ‚Äî pure ctypes implementation.</p>
</blockquote>
<ul>
<li><code>is_windows()</code>
  ‚Äî Is windows.</li>
<li><code>run_tray(port)</code>
  ‚Äî Run SalmAlm with system tray icon (Windows only).</li>
</ul>
<h3 id="salmalmfeaturesusage"><code>salmalm.features.usage</code><a class="headerlink" href="#salmalmfeaturesusage" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Token Usage Tracking (ÏÇ¨Ïö©Îüâ Ï∂îÏ†Å) ‚Äî LibreChat style.</p>
</blockquote>
<h4 id="class-usagetracker"><code>class UsageTracker</code><a class="headerlink" href="#class-usagetracker" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Per-user, per-model token usage tracking with daily/monthly reports.</p>
</blockquote>
<ul>
<li><code>record(session_id, model, input_tokens, output_tokens, cost)</code>
  ‚Äî Record.</li>
<li><code>daily_report(days)</code>
  ‚Äî Daily report.</li>
<li><code>monthly_report(months)</code>
  ‚Äî Monthly report.</li>
<li><code>model_breakdown()</code>
  ‚Äî Model breakdown.</li>
</ul>
<h3 id="salmalmfeaturesusers"><code>salmalm.features.users</code><a class="headerlink" href="#salmalmfeaturesusers" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Users ‚Äî Multi-tenant user management, quotas, per-user isolation.</p>
</blockquote>
<h4 id="class-quotaexceeded"><code>class QuotaExceeded</code><a class="headerlink" href="#class-quotaexceeded" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Raised when a user exceeds their daily or monthly cost quota.</p>
</blockquote>
<h4 id="class-usermanager"><code>class UserManager</code><a class="headerlink" href="#class-usermanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Multi-tenant user manager with quotas and data isolation.</p>
</blockquote>
<ul>
<li><code>multi_tenant_enabled()</code>
  ‚Äî Check if multi-tenant mode is enabled.</li>
<li><code>enable_multi_tenant(enabled)</code>
  ‚Äî Enable or disable multi-tenant mode.</li>
<li><code>get_config(key, default)</code>
  ‚Äî Get a multi-tenant config value.</li>
<li><code>set_config(key, value)</code>
  ‚Äî Set a multi-tenant config value.</li>
<li><code>ensure_quota(user_id)</code>
  ‚Äî Create quota record for user if it doesn't exist.</li>
<li><code>check_quota(user_id)</code>
  ‚Äî Check if user is within quota. Returns quota info.</li>
<li><code>record_cost(user_id, cost)</code>
  ‚Äî Record cost against user quota.</li>
<li><code>set_quota(user_id, daily_limit, monthly_limit)</code>
  ‚Äî Set quota limits for a user (admin only).</li>
<li><code>get_quota(user_id)</code>
  ‚Äî Get quota info for a user.</li>
<li><code>reset_all_daily_quotas()</code>
  ‚Äî Reset all users' daily quotas. Called at midnight.</li>
</ul>
<h3 id="salmalmfeaturesvault_chat"><code>salmalm.features.vault_chat</code><a class="headerlink" href="#salmalmfeaturesvault_chat" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Encrypted Vault Chat ‚Äî AES-256-GCM encrypted conversation store.</p>
</blockquote>
<h4 id="class-vaultchat"><code>class VaultChat</code><a class="headerlink" href="#class-vaultchat" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Encrypted vault for private notes and conversations.</p>
</blockquote>
<ul>
<li><code>is_setup()</code>
  ‚Äî Check if vault has been set up (meta file exists).</li>
<li><code>setup(password)</code>
  ‚Äî Initial vault setup ‚Äî create password hash and empty encrypted DB.</li>
<li><code>change_password(old_password, new_password)</code>
  ‚Äî Change vault password.</li>
<li><code>open(password)</code>
  ‚Äî Unlock the vault.</li>
<li><code>close()</code>
  ‚Äî Lock the vault ‚Äî flush to disk and wipe key from memory.</li>
<li><code>is_open()</code>
  ‚Äî Is open.</li>
<li><code>vault_note(content, category)</code>
  ‚Äî Add a note to the vault.</li>
<li><code>vault_list(category, limit)</code>
  ‚Äî List vault entries.</li>
<li><code>vault_search(query)</code>
  ‚Äî Search vault entries.</li>
<li><code>vault_delete(entry_id)</code>
  ‚Äî Delete a vault entry.</li>
</ul>
<h3 id="salmalmfeatureswatcher"><code>salmalm.features.watcher</code><a class="headerlink" href="#salmalmfeatureswatcher" title="Permanent link">&para;</a></h3>
<blockquote>
<p>File Watcher + Auto-Index ‚Äî polling-based file change detection with RAG re-indexing.</p>
</blockquote>
<h4 id="class-filewatcher"><code>class FileWatcher</code><a class="headerlink" href="#class-filewatcher" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Polling-based file watcher that detects created/modified/deleted files.</p>
</blockquote>
<ul>
<li><code>start()</code>
  ‚Äî Start watching in a background thread.</li>
<li><code>stop()</code>
  ‚Äî Stop the watcher.</li>
<li><code>running()</code>
  ‚Äî Running.</li>
<li><code>get_watched_files()</code>
  ‚Äî Return current tracked files and their mtimes.</li>
</ul>
<h4 id="class-ragfilewatcher"><code>class RAGFileWatcher</code><a class="headerlink" href="#class-ragfilewatcher" title="Permanent link">&para;</a></h4>
<blockquote>
<p>FileWatcher that triggers RAG re-indexing on file changes.</p>
</blockquote>
<h3 id="salmalmfeaturesweb_clip"><code>salmalm.features.web_clip</code><a class="headerlink" href="#salmalmfeaturesweb_clip" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Web Clipboard ‚Äî clip URLs, extract content, search clips.</p>
</blockquote>
<h4 id="class-_tagstripper"><code>class _TagStripper</code><a class="headerlink" href="#class-_tagstripper" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Simple HTML tag stripper with readability heuristics.</p>
</blockquote>
<ul>
<li><code>handle_starttag(tag, attrs)</code>
  ‚Äî Handle starttag.</li>
<li><code>handle_endtag(tag)</code>
  ‚Äî Handle endtag.</li>
<li><code>handle_data(data)</code>
  ‚Äî Handle data.</li>
<li><code>get_text()</code>
  ‚Äî Get text.</li>
<li><code>get_title()</code>
  ‚Äî Get title.</li>
</ul>
<h4 id="class-webclip"><code>class WebClip</code><a class="headerlink" href="#class-webclip" title="Permanent link">&para;</a></h4>
<blockquote>
<p>A saved web clip.</p>
</blockquote>
<ul>
<li><code>to_dict()</code>
  ‚Äî To dict.</li>
<li><code>from_dict(cls, d)</code>
  ‚Äî From dict.</li>
</ul>
<h4 id="class-clipmanager"><code>class ClipManager</code><a class="headerlink" href="#class-clipmanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Manage web clips.</p>
</blockquote>
<ul>
<li><code>clip_url(url)</code>
  ‚Äî Fetch, extract, and save a URL.</li>
<li><code>add_clip(url, title, content)</code>
  ‚Äî Manually add a clip without fetching.</li>
<li><code>get(clip_id)</code>
  ‚Äî Get.</li>
<li><code>list_all(limit)</code>
  ‚Äî List all.</li>
<li><code>search(query)</code>
  ‚Äî Simple keyword search across clips.</li>
<li><code>remove(clip_id)</code>
  ‚Äî Remove.</li>
<li>
<p><code>count()</code>
  ‚Äî Count.</p>
</li>
<li>
<p><code>extract_readable(html_text)</code>
  ‚Äî Extract readable text and title from HTML.</p>
</li>
<li><code>fetch_url(url, timeout)</code>
  ‚Äî Fetch URL content. Returns HTML string.</li>
<li><code>handle_clip_command(cmd, session)</code>
  ‚Äî Handle /clip <url> | /clip search <query> | /clip list.</li>
<li><code>register_commands(router)</code>
  ‚Äî Register /clip commands.</li>
<li><code>register_tools(registry_module)</code>
  ‚Äî Register web clip tools.</li>
</ul>
<h3 id="salmalmfeaturesworkflow"><code>salmalm.features.workflow</code><a class="headerlink" href="#salmalmfeaturesworkflow" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Workflow Engine ‚Äî multi-step automation pipelines with variable substitution.</p>
</blockquote>
<h4 id="class-stepresult"><code>class StepResult</code><a class="headerlink" href="#class-stepresult" title="Permanent link">&para;</a></h4>
<ul>
<li><code>to_dict()</code>
  ‚Äî To dict.</li>
</ul>
<h4 id="class-workflowengine"><code>class WorkflowEngine</code><a class="headerlink" href="#class-workflowengine" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Execute multi-step workflows with variable substitution.</p>
</blockquote>
<ul>
<li><code>list_workflows()</code>
  ‚Äî List workflows.</li>
<li><code>get_workflow(name)</code>
  ‚Äî Get workflow.</li>
<li><code>save_workflow(workflow)</code>
  ‚Äî Save workflow.</li>
<li><code>delete_workflow(name)</code>
  ‚Äî Delete workflow.</li>
<li><code>run(name)</code>
  ‚Äî Run.</li>
<li><code>execute(workflow)</code>
  ‚Äî Execute.</li>
<li><code>get_logs(name, limit)</code>
  ‚Äî Get logs.</li>
<li><code>get_presets()</code>
  ‚Äî Get presets.</li>
<li>
<p><code>install_preset(name)</code>
  ‚Äî Install preset.</p>
</li>
<li>
<p><code>handle_workflow_command(text)</code>
  ‚Äî Handle workflow command.</p>
</li>
</ul>
<h2 id="channels-channels-telegram-discord">channels/ ‚Äî Channels ‚Äî Telegram, Discord / Ï±ÑÎÑê ‚Äî ÌÖîÎ†àÍ∑∏Îû®, ÎîîÏä§ÏΩîÎìú<a class="headerlink" href="#channels-channels-telegram-discord" title="Permanent link">&para;</a></h2>
<h3 id="salmalmchannelschannel_router"><code>salmalm.channels.channel_router</code><a class="headerlink" href="#salmalmchannelschannel_router" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Channel Router ‚Äî Multi-channel message routing.</p>
</blockquote>
<h4 id="class-channelrouter"><code>class ChannelRouter</code><a class="headerlink" href="#class-channelrouter" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Routes messages between multiple channels and the agent engine.</p>
</blockquote>
<ul>
<li><code>register(name)</code>
  ‚Äî Register a channel for routing.</li>
<li><code>unregister(name)</code>
  ‚Äî Unregister.</li>
<li><code>set_handler(channel, handler)</code>
  ‚Äî Set inbound message handler for a channel.</li>
<li><code>get_handler(channel)</code>
  ‚Äî Get handler.</li>
<li><code>channels()</code>
  ‚Äî Channels.</li>
<li><code>is_enabled(name)</code>
  ‚Äî Is enabled.</li>
<li><code>route_outbound(channel, is_group)</code>
  ‚Äî Send a message through the specified channel.</li>
<li><code>async route_inbound(channel, message, process_fn)</code>
  ‚Äî Route an inbound message from a channel to the agent, return response.</li>
<li><code>list_channels()</code>
  ‚Äî List all registered channels with status.</li>
<li>
<p><code>save_config()</code>
  ‚Äî Persist current channel config.</p>
</li>
<li>
<p><code>format_for_channel(text, channel)</code>
  ‚Äî Format text according to channel-specific rules.</p>
</li>
</ul>
<h3 id="salmalmchannelsdiscord_bot"><code>salmalm.channels.discord_bot</code><a class="headerlink" href="#salmalmchannelsdiscord_bot" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Discord Bot ‚Äî Discord Gateway + HTTP API.</p>
</blockquote>
<h4 id="class-discordbot"><code>class DiscordBot</code><a class="headerlink" href="#class-discordbot" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Minimal Discord bot using Gateway WebSocket + REST API.</p>
</blockquote>
<ul>
<li><code>configure(token, owner_id)</code>
  ‚Äî Configure the Discord bot with token and channel settings.</li>
<li><code>on_message(func)</code>
  ‚Äî Decorator to register message handler.</li>
<li><code>send_message(channel_id, content, reply_to)</code>
  ‚Äî Send a message to a channel, splitting if over 2000 chars.</li>
<li><code>send_typing(channel_id)</code>
  ‚Äî Send typing indicator.</li>
<li><code>start_typing_loop(channel_id)</code>
  ‚Äî Start a continuous typing indicator loop (refreshes every 8s).</li>
<li><code>add_reaction(channel_id, message_id, emoji)</code>
  ‚Äî Add an emoji reaction to a Discord message.</li>
<li><code>remove_reaction(channel_id, message_id, emoji)</code>
  ‚Äî Remove bot's own reaction from a Discord message.</li>
<li><code>async poll()</code>
  ‚Äî Main gateway loop ‚Äî uses websockets lib if available, raw SSL otherwise.</li>
<li><code>stop()</code>
  ‚Äî Stop the Discord bot.</li>
</ul>
<h3 id="salmalmchannelsslack_bot"><code>salmalm.channels.slack_bot</code><a class="headerlink" href="#salmalmchannelsslack_bot" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Slack Bot ‚Äî Pure stdlib Slack integration.</p>
</blockquote>
<h4 id="class-slackbot"><code>class SlackBot</code><a class="headerlink" href="#class-slackbot" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Minimal Slack bot using Event API (webhook) + Web API (urllib).</p>
</blockquote>
<ul>
<li><code>configure(bot_token, signing_secret)</code>
  ‚Äî Configure the Slack bot.</li>
<li><code>on_message(func)</code>
  ‚Äî Register message handler.</li>
<li><code>send_message(channel, text)</code>
  ‚Äî Send a message to a Slack channel.</li>
<li><code>add_reaction(channel, timestamp, emoji)</code>
  ‚Äî Add an emoji reaction to a message.</li>
<li><code>get_bot_info()</code>
  ‚Äî Fetch bot user info.</li>
<li><code>verify_request(timestamp, signature, body)</code>
  ‚Äî Verify Slack request signature.</li>
<li><code>handle_event(payload)</code>
  ‚Äî Handle an incoming Slack event.</li>
<li><code>update_message(channel, ts, text)</code>
  ‚Äî Update an existing message.</li>
<li><code>delete_message(channel, ts)</code>
  ‚Äî Delete a message.</li>
</ul>
<h3 id="salmalmchannelstelegram"><code>salmalm.channels.telegram</code><a class="headerlink" href="#salmalmchannelstelegram" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Telegram bot.</p>
</blockquote>
<h4 id="class-telegrambot"><code>class TelegramBot</code><a class="headerlink" href="#class-telegrambot" title="Permanent link">&para;</a></h4>
<ul>
<li><code>configure(token, owner_id)</code>
  ‚Äî Configure the Telegram bot with token and owner chat ID.</li>
<li><code>ack_reaction(chat_id, message_id)</code>
  ‚Äî Send ack reaction (üëÄ) while processing ‚Äî OpenClaw-style.</li>
<li><code>clear_reaction(chat_id, message_id)</code>
  ‚Äî Clear reaction after processing completes.</li>
<li><code>set_message_reaction(chat_id, message_id, emoji)</code>
  ‚Äî React to a message with an emoji via setMessageReaction API.</li>
<li><code>send_message(chat_id, text, parse_mode, reply_markup, message_thread_id)</code>
  ‚Äî Send a text message to a Telegram chat, with optional inline keyboard.</li>
<li><code>send_typing(chat_id)</code>
  ‚Äî Send a typing indicator to a Telegram chat.</li>
<li><code>edit_message(chat_id, message_id, text, parse_mode)</code>
  ‚Äî Edit an existing Telegram message.</li>
<li><code>set_webhook(url)</code>
  ‚Äî Set Telegram webhook. Generates a secret_token for request verification.</li>
<li><code>delete_webhook()</code>
  ‚Äî Delete Telegram webhook and return to polling mode.</li>
<li><code>verify_webhook_request(secret_token)</code>
  ‚Äî Verify the X-Telegram-Bot-Api-Secret-Token header.</li>
</ul>
<h3 id="salmalmchannelstelegram_commands"><code>salmalm.channels.telegram_commands</code><a class="headerlink" href="#salmalmchannelstelegram_commands" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Telegram command handler ‚Äî extracted from TelegramBot._handle_command.</p>
</blockquote>
<h4 id="class-telegramcommandsmixin"><code>class TelegramCommandsMixin</code><a class="headerlink" href="#class-telegramcommandsmixin" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Mixin for /command handling in Telegram bot.</p>
</blockquote>
<h3 id="salmalmchannelstelegram_media"><code>salmalm.channels.telegram_media</code><a class="headerlink" href="#salmalmchannelstelegram_media" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Telegram media handling mixin.</p>
</blockquote>
<h4 id="class-telegrammediamixin"><code>class TelegramMediaMixin</code><a class="headerlink" href="#class-telegrammediamixin" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Mixin for media extraction and TTS.</p>
</blockquote>
<h2 id="security-security-crypto-sandbox">security/ ‚Äî Security ‚Äî Crypto, Sandbox / Î≥¥Ïïà ‚Äî ÏïîÌò∏Ìôî, ÏÉåÎìúÎ∞ïÏä§<a class="headerlink" href="#security-security-crypto-sandbox" title="Permanent link">&para;</a></h2>
<h3 id="salmalmsecuritycontainer"><code>salmalm.security.container</code><a class="headerlink" href="#salmalmsecuritycontainer" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm DI Container ‚Äî Lightweight service registry.</p>
</blockquote>
<h4 id="class-container"><code>class Container</code><a class="headerlink" href="#class-container" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Lightweight DI container with lazy initialization.</p>
</blockquote>
<ul>
<li><code>register(name, factory)</code>
  ‚Äî Register a lazy factory for a service.</li>
<li><code>set(name, instance)</code>
  ‚Äî Set an already-created service instance.</li>
<li><code>get(name)</code>
  ‚Äî Get a service, creating it lazily if needed.</li>
<li><code>replace(name, instance)</code>
  ‚Äî Replace a service (for testing). Returns old instance.</li>
<li><code>has(name)</code>
  ‚Äî Check if a service is registered.</li>
<li><code>reset()</code>
  ‚Äî Clear all services (for testing).</li>
<li><code>vault()</code>
  ‚Äî Get the Vault service instance.</li>
<li><code>router()</code>
  ‚Äî Get the ModelRouter service instance.</li>
<li><code>auth_manager()</code>
  ‚Äî Get the AuthManager service instance.</li>
<li><code>rate_limiter()</code>
  ‚Äî Get the RateLimiter service instance.</li>
</ul>
<h3 id="salmalmsecuritycrypto"><code>salmalm.security.crypto</code><a class="headerlink" href="#salmalmsecuritycrypto" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm crypto ‚Äî AES-256-GCM vault with HMAC-CTR fallback.</p>
</blockquote>
<h4 id="class-vault"><code>class Vault</code><a class="headerlink" href="#class-vault" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Encrypted key-value store for API keys and secrets.</p>
</blockquote>
<ul>
<li><code>is_unlocked()</code>
  ‚Äî Whether the vault has been unlocked with a valid password.</li>
<li><code>create(password, save_to_keychain, force)</code>
  ‚Äî Create a new vault with the given master password.</li>
<li><code>try_keychain_unlock()</code>
  ‚Äî Attempt to unlock vault using OS keychain. Returns True on success.</li>
<li><code>unlock(password, save_to_keychain)</code>
  ‚Äî Unlock an existing vault. Returns True on success.</li>
<li><code>get(key, default)</code>
  ‚Äî Get a stored value. Falls back to environment variable if not in vault.</li>
<li><code>set(key, value)</code>
  ‚Äî Store a value (triggers re-encryption).</li>
<li><code>delete(key)</code>
  ‚Äî Delete a key.</li>
<li><code>change_password(old_password, new_password)</code>
  ‚Äî Change vault master password. Returns True on success.</li>
<li><code>keys()</code>
  ‚Äî List all stored key names.</li>
</ul>
<h3 id="salmalmsecurityexec_approvals"><code>salmalm.security.exec_approvals</code><a class="headerlink" href="#salmalmsecurityexec_approvals" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Exec approval system ‚Äî allowlist/denylist + dangerous command detection.</p>
</blockquote>
<h4 id="class-backgroundsession"><code>class BackgroundSession</code><a class="headerlink" href="#class-backgroundsession" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Manages a background exec process.</p>
</blockquote>
<ul>
<li><code>start()</code>
  ‚Äî Start the background process.</li>
<li><code>poll()</code>
  ‚Äî Poll current status.</li>
<li><code>kill()</code>
  ‚Äî Kill the background process and its children.</li>
<li><code>list_sessions(cls)</code>
  ‚Äî List all background sessions.</li>
<li><code>get_session(cls, session_id)</code>
  ‚Äî Get a background session by ID.</li>
<li>
<p><code>kill_session(cls, session_id)</code>
  ‚Äî Kill a specific background session.</p>
</li>
<li>
<p><code>check_approval(command)</code>
  ‚Äî Check if a command needs approval.</p>
</li>
<li><code>check_env_override(env)</code>
  ‚Äî Check if env dict tries to override blocked variables.</li>
</ul>
<h3 id="salmalmsecurityredact"><code>salmalm.security.redact</code><a class="headerlink" href="#salmalmsecurityredact" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Shared secret redaction utilities.</p>
</blockquote>
<ul>
<li><code>contains_secret(text)</code>
  ‚Äî Check if text contains potential secrets.</li>
<li><code>scrub_secrets(text)</code>
  ‚Äî Redact secrets from text, keeping surrounding context.</li>
</ul>
<h3 id="salmalmsecuritysandbox"><code>salmalm.security.sandbox</code><a class="headerlink" href="#salmalmsecuritysandbox" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Lightweight Process Sandbox ‚Äî OS-native isolation without Docker.</p>
</blockquote>
<h4 id="class-sandboxcapabilities"><code>class SandboxCapabilities</code><a class="headerlink" href="#class-sandboxcapabilities" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Detect available sandbox capabilities on this OS.</p>
</blockquote>
<ul>
<li><code>detect(cls)</code>
  ‚Äî Detect.</li>
</ul>
<h4 id="class-sandboxconfig"><code>class SandboxConfig</code><a class="headerlink" href="#class-sandboxconfig" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Configuration for sandboxed execution.</p>
</blockquote>
<ul>
<li><code>strict(cls)</code>
  ‚Äî Strict.</li>
<li><code>standard(cls)</code>
  ‚Äî Standard.</li>
<li><code>permissive(cls)</code>
  ‚Äî Permissive.</li>
</ul>
<h4 id="class-sandboxresult"><code>class SandboxResult</code><a class="headerlink" href="#class-sandboxresult" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Result of a sandboxed execution.</p>
</blockquote>
<ul>
<li><code>success()</code>
  ‚Äî Success.</li>
<li>
<p><code>format_output()</code>
  ‚Äî Format output.</p>
</li>
<li>
<p><code>sandbox_exec(command, timeout, allow_network, memory_mb, workspace)</code>
  ‚Äî Execute a command in the best available sandbox.</p>
</li>
<li><code>get_sandbox_status()</code>
  ‚Äî Get sandbox capabilities status (for /security and UI).</li>
<li><code>sandboxed_exec(command, config, shell)</code>
  ‚Äî Execute a command in sandbox (backward-compatible wrapper).</li>
<li><code>path_jail(path_str, root)</code>
  ‚Äî Check if a path is within allowed boundaries.</li>
</ul>
<h3 id="salmalmsecuritysecurity"><code>salmalm.security.security</code><a class="headerlink" href="#salmalmsecuritysecurity" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Security Module ‚Äî OWASP compliance, security audit, hardening.</p>
</blockquote>
<h4 id="class-loginratelimiter"><code>class LoginRateLimiter</code><a class="headerlink" href="#class-loginratelimiter" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Per-key exponential backoff for login attempts.</p>
</blockquote>
<ul>
<li><code>check(key)</code>
  ‚Äî Check if login attempt is allowed.</li>
<li><code>record_failure(key)</code>
  ‚Äî Record a failed login attempt. Ïã§Ìå®Ìïú Î°úÍ∑∏Ïù∏ Í∏∞Î°ù.</li>
<li><code>record_success(key)</code>
  ‚Äî Clear attempts on successful login. ÏÑ±Í≥µ Ïãú ÏãúÎèÑ Í∏∞Î°ù Ï¥àÍ∏∞Ìôî.</li>
<li><code>cleanup()</code>
  ‚Äî Remove stale entries. Ïò§ÎûòÎêú Ìï≠Î™© Ï†ïÎ¶¨.</li>
</ul>
<h4 id="class-securityauditor"><code>class SecurityAuditor</code><a class="headerlink" href="#class-securityauditor" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Generate OWASP Top 10 compliance report.</p>
</blockquote>
<ul>
<li><code>audit()</code>
  ‚Äî Run full security audit. Returns report dict.</li>
<li>
<p><code>format_report()</code>
  ‚Äî Format audit report as human-readable text.</p>
</li>
<li>
<p><code>redact_sensitive(text)</code>
  ‚Äî ÎØºÍ∞ê Ï†ïÎ≥¥Î•º [REDACTED]Î°ú ÏπòÌôò.</p>
</li>
<li><code>is_internal_ip(url)</code>
  ‚Äî Check if URL resolves to internal/private IP.</li>
<li><code>sanitize_session_id(session_id)</code>
  ‚Äî Sanitize session ID to prevent injection.</li>
<li><code>validate_input_size(data, max_size)</code>
  ‚Äî Check input doesn't exceed size limit.</li>
</ul>
<h2 id="utils-utils-http-queue-retry-http">utils/ ‚Äî Utils ‚Äî HTTP, Queue, Retry / Ïú†Ìã∏Î¶¨Ìã∞ ‚Äî HTTP, ÌÅê, Ïû¨ÏãúÎèÑ<a class="headerlink" href="#utils-utils-http-queue-retry-http" title="Permanent link">&para;</a></h2>
<h3 id="salmalmutilsasync_http"><code>salmalm.utils.async_http</code><a class="headerlink" href="#salmalmutilsasync_http" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Async HTTP client built on stdlib asyncio (no third-party deps).</p>
</blockquote>
<h4 id="class-asynchttpresponse"><code>class AsyncHTTPResponse</code><a class="headerlink" href="#class-asynchttpresponse" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Lightweight async HTTP response wrapper.</p>
</blockquote>
<ul>
<li><code>async read()</code>
  ‚Äî Read entire response body (handles chunked transfer-encoding).</li>
<li><code>async json()</code>
  ‚Äî Json.</li>
<li><code>async text()</code>
  ‚Äî Text.</li>
<li><code>async iter_lines()</code>
  ‚Äî Yield lines as they arrive (for SSE / streaming).</li>
<li><code>async iter_chunks(size)</code>
  ‚Äî Yield raw byte chunks.</li>
</ul>
<h4 id="class-asynchttpclient"><code>class AsyncHTTPClient</code><a class="headerlink" href="#class-asynchttpclient" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Pure-stdlib asyncio HTTP/1.1 client.</p>
</blockquote>
<ul>
<li><code>async request(method, url)</code>
  ‚Äî Send an HTTP/1.1 request and return an :class:<code>AsyncHTTPResponse</code>.</li>
<li><code>async get(url)</code>
  ‚Äî Get.</li>
<li><code>async post(url)</code>
  ‚Äî Post.</li>
<li><code>async post_json(url, data)</code>
  ‚Äî Post json.</li>
</ul>
<h3 id="salmalmutilsbrowser"><code>salmalm.utils.browser</code><a class="headerlink" href="#salmalmutilsbrowser" title="Permanent link">&para;</a></h3>
<h4 id="class-cdpconnection"><code>class CDPConnection</code><a class="headerlink" href="#class-cdpconnection" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Low-level CDP WebSocket connection to Chrome.</p>
</blockquote>
<ul>
<li><code>async connect(ws_url)</code>
  ‚Äî Connect to CDP WebSocket endpoint.</li>
<li><code>async disconnect()</code>
  ‚Äî Disconnect from the browser WebSocket.</li>
<li><code>async send(method, params, timeout)</code>
  ‚Äî Send CDP command and wait for response.</li>
<li><code>on_event(method, handler)</code>
  ‚Äî Register event handler.</li>
</ul>
<h4 id="class-browsercontroller"><code>class BrowserController</code><a class="headerlink" href="#class-browsercontroller" title="Permanent link">&para;</a></h4>
<blockquote>
<p>High-level browser automation API over CDP.</p>
</blockquote>
<ul>
<li><code>connected()</code>
  ‚Äî Check if the browser connection is active.</li>
<li><code>async connect(tab_index)</code>
  ‚Äî Connect to Chrome's first tab via CDP.</li>
<li><code>async disconnect()</code>
  ‚Äî Disconnect from the browser WebSocket.</li>
<li><code>async navigate(url, wait_load)</code>
  ‚Äî Navigate to URL. Returns {frameId, loaderId}.</li>
<li><code>async screenshot(full_page, format, quality)</code>
  ‚Äî Take screenshot, return base64 encoded image.</li>
<li><code>async get_text()</code>
  ‚Äî Extract page text content.</li>
<li><code>async get_html()</code>
  ‚Äî Get page HTML.</li>
<li><code>async evaluate(expression, return_by_value)</code>
  ‚Äî Execute JavaScript and return result.</li>
<li><code>async click(selector)</code>
  ‚Äî Click an element by CSS selector.</li>
<li><code>async type_text(selector, text)</code>
  ‚Äî Type text into an input element.</li>
</ul>
<h4 id="class-browsermanager"><code>class BrowserManager</code><a class="headerlink" href="#class-browsermanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Manages Chrome lifecycle ‚Äî auto-detect, launch, connect, close.</p>
</blockquote>
<ul>
<li><code>find_chrome()</code>
  ‚Äî Auto-detect Chrome/Chromium binary.</li>
<li><code>async launch(url, headless)</code>
  ‚Äî Launch Chrome and connect via CDP.</li>
<li><code>controller()</code>
  ‚Äî Controller.</li>
<li><code>connected()</code>
  ‚Äî Connected.</li>
<li><code>async close()</code>
  ‚Äî Disconnect and kill Chrome.</li>
<li>
<p><code>close_sync()</code>
  ‚Äî Kill Chrome process (sync).</p>
</li>
<li>
<p><code>async browser_open(url)</code>
  ‚Äî Open a URL. Launches Chrome if not connected.</p>
</li>
<li><code>async browser_screenshot()</code>
  ‚Äî Take screenshot, return base64 PNG.</li>
<li><code>async browser_snapshot()</code>
  ‚Äî Extract page text (accessibility tree approximation).</li>
<li><code>async browser_click(selector)</code>
  ‚Äî Click element by CSS selector.</li>
<li><code>async browser_type(selector, text)</code>
  ‚Äî Type text into element.</li>
<li><code>async browser_evaluate(js)</code>
  ‚Äî Execute JavaScript and return result.</li>
<li><code>async browser_close()</code>
  ‚Äî Close browser.</li>
</ul>
<h3 id="salmalmutilschunker"><code>salmalm.utils.chunker</code><a class="headerlink" href="#salmalmutilschunker" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Smart block chunking ‚Äî code fence aware, coalescing, human-like pacing.</p>
</blockquote>
<h4 id="class-chunkerconfig"><code>class ChunkerConfig</code><a class="headerlink" href="#class-chunkerconfig" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Configuration for EmbeddedBlockChunker.</p>
</blockquote>
<ul>
<li><code>effective_hard_cap()</code>
  ‚Äî Effective hard cap.</li>
<li><code>effective_max_lines()</code>
  ‚Äî Effective max lines.</li>
<li><code>uses_plain_fallback()</code>
  ‚Äî Uses plain fallback.</li>
</ul>
<h4 id="class-embeddedblockchunker"><code>class EmbeddedBlockChunker</code><a class="headerlink" href="#class-embeddedblockchunker" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Accumulates streaming text and emits Markdown-safe chunks.</p>
</blockquote>
<ul>
<li><code>buffer()</code>
  ‚Äî Buffer.</li>
<li><code>chunk_count()</code>
  ‚Äî Chunk count.</li>
<li><code>feed(text)</code>
  ‚Äî Feed a token/text fragment. May emit a chunk via callback.</li>
<li><code>check_idle()</code>
  ‚Äî Check if idle timeout has elapsed and flush if needed.</li>
<li><code>flush()</code>
  ‚Äî Flush any remaining buffer as the final chunk.</li>
<li><code>compute_delay()</code>
  ‚Äî Compute human-like delay before sending the next chunk.</li>
<li>
<p><code>split_for_channel(text)</code>
  ‚Äî Split a complete text into channel-appropriate messages.</p>
</li>
<li>
<p><code>load_config_from_file(path)</code>
  ‚Äî Load streaming config from ~/.salmalm/streaming.json if it exists.</p>
</li>
</ul>
<h3 id="salmalmutilscommon"><code>salmalm.utils.common</code><a class="headerlink" href="#salmalmutilscommon" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Common helpers ‚Äî ÎÇ†Ïßú, JSON, ÌååÏùº I/O Í≥µÌÜµ Ïú†Ìã∏.</p>
</blockquote>
<ul>
<li><code>now_kst()</code>
  ‚Äî Return current datetime in KST.</li>
<li><code>today_str(fmt)</code>
  ‚Äî Return today's date string in KST.</li>
<li><code>format_datetime(dt, fmt)</code>
  ‚Äî Format a datetime object.</li>
<li><code>json_loads_safe(text, default)</code>
  ‚Äî Parse JSON with fallback to <em>default</em> on error.</li>
<li><code>json_dumps(obj)</code>
  ‚Äî Compact JSON dump (default ensure_ascii=False for Korean).</li>
<li><code>read_text_safe(path, default)</code>
  ‚Äî Read a text file; return <em>default</em> if missing or unreadable.</li>
<li><code>write_text_atomic(path, content)</code>
  ‚Äî Write text to file, creating parent dirs if needed.</li>
</ul>
<h3 id="salmalmutilsdb"><code>salmalm.utils.db</code><a class="headerlink" href="#salmalmutilsdb" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SQLite common patterns ‚Äî DB Ï¥àÍ∏∞Ìôî, Ïó∞Í≤∞ ÎûòÌçº.</p>
</blockquote>
<ul>
<li><code>connect(path)</code>
  ‚Äî Open a SQLite connection with common defaults.</li>
<li><code>ensure_table(conn, ddl)</code>
  ‚Äî Execute a CREATE TABLE IF NOT EXISTS statement.</li>
<li><code>query_all(conn, sql, params)</code>
  ‚Äî Fetch all rows for a query.</li>
<li><code>query_one(conn, sql, params)</code>
  ‚Äî Fetch a single row.</li>
</ul>
<h3 id="salmalmutilsdedup"><code>salmalm.utils.dedup</code><a class="headerlink" href="#salmalmutilsdedup" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Message deduplication and channel-aware debouncing.</p>
</blockquote>
<h4 id="class-messagededuplicator"><code>class MessageDeduplicator</code><a class="headerlink" href="#class-messagededuplicator" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Deduplicates inbound messages using a TTL cache.</p>
</blockquote>
<ul>
<li><code>is_duplicate(channel, account, peer, message_id)</code>
  ‚Äî Return True if this message was already seen within the TTL window.</li>
<li><code>size()</code>
  ‚Äî Size.</li>
<li>
<p><code>clear()</code>
  ‚Äî Clear.</p>
</li>
<li>
<p><code>get_debounce_ms(channel)</code>
  ‚Äî Get debounce time in ms for a channel.</p>
</li>
<li><code>should_skip_debounce(message, has_media)</code>
  ‚Äî Return True if this message should skip debouncing.</li>
</ul>
<h3 id="salmalmutilsfile_logger"><code>salmalm.utils.file_logger</code><a class="headerlink" href="#salmalmutilsfile_logger" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Structured file logger ‚Äî JSON Lines format.</p>
</blockquote>
<h4 id="class-filelogger"><code>class FileLogger</code><a class="headerlink" href="#class-filelogger" title="Permanent link">&para;</a></h4>
<blockquote>
<p>JSON Lines ÌååÏùº Î°úÍ±∞.</p>
</blockquote>
<ul>
<li><code>log(level, category, message)</code>
  ‚Äî JSON ÎùºÏù∏ Î°úÍ∑∏ Í∏∞Î°ù.</li>
<li><code>tail(lines, level)</code>
  ‚Äî ÏµúÍ∑º Î°úÍ∑∏ Ï°∞Ìöå.</li>
<li><code>search(query, days)</code>
  ‚Äî Î°úÍ∑∏ Í≤ÄÏÉâ.</li>
<li><code>cleanup(retain_days)</code>
  ‚Äî Ïò§ÎûòÎêú Î°úÍ∑∏ ÏÇ≠Ï†ú. Returns number of files removed.</li>
</ul>
<h3 id="salmalmutilshttp"><code>salmalm.utils.http</code><a class="headerlink" href="#salmalmutilshttp" title="Permanent link">&para;</a></h3>
<blockquote>
<p>HTTP request common functions ‚Äî urllib.request ÎûòÌçº.</p>
</blockquote>
<ul>
<li><code>request(url)</code>
  ‚Äî Perform an HTTP request and return the response body as bytes.</li>
<li><code>request_json(url)</code>
  ‚Äî Perform an HTTP request and return JSON-decoded response.</li>
<li><code>post_json(url, payload)</code>
  ‚Äî POST JSON data and return JSON-decoded response.</li>
</ul>
<h3 id="salmalmutilslog"><code>salmalm.utils.log</code><a class="headerlink" href="#salmalmutilslog" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Centralized logging configuration for SalmAlm.</p>
</blockquote>
<ul>
<li><code>setup_logging(level, fmt, datefmt, log_file, max_bytes)</code>
  ‚Äî Configure the <code>salmalm</code> root logger.</li>
</ul>
<h3 id="salmalmutilslogging_ext"><code>salmalm.utils.logging_ext</code><a class="headerlink" href="#salmalmutilslogging_ext" title="Permanent link">&para;</a></h3>
<h4 id="class-jsonformatter"><code>class JSONFormatter</code><a class="headerlink" href="#class-jsonformatter" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Format log records as JSON lines.</p>
</blockquote>
<ul>
<li><code>format(record)</code>
  ‚Äî Format a log record with correlation ID prefix.</li>
</ul>
<h4 id="class-requestlogger"><code>class RequestLogger</code><a class="headerlink" href="#class-requestlogger" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Middleware-style request/response logger.</p>
</blockquote>
<ul>
<li><code>log_request(method, path, ip, user, status_code)</code>
  ‚Äî Log a request with structured data.</li>
<li>
<p><code>get_metrics()</code>
  ‚Äî Get request metrics (exclude internal durations list).</p>
</li>
<li>
<p><code>setup_production_logging(json_log, max_bytes, backup_count)</code>
  ‚Äî Configure production-grade logging with rotation.</p>
</li>
<li><code>get_correlation_id()</code>
  ‚Äî Get or create correlation ID for current request.</li>
<li><code>set_correlation_id(cid)</code>
  ‚Äî Set the correlation ID for the current thread context.</li>
<li><code>safe_execute(func)</code>
  ‚Äî Execute a function with graceful error recovery.</li>
<li><code>async safe_execute_async(coro, fallback, tag)</code>
  ‚Äî Async version of safe_execute.</li>
</ul>
<h3 id="salmalmutilsmarkdown_ir"><code>salmalm.utils.markdown_ir</code><a class="headerlink" href="#salmalmutilsmarkdown_ir" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Markdown IR ‚Äî intermediate representation for cross-channel rendering.</p>
</blockquote>
<h4 id="class-stylespan"><code>class StyleSpan</code><a class="headerlink" href="#class-stylespan" title="Permanent link">&para;</a></h4>
<h4 id="class-linkspan"><code>class LinkSpan</code><a class="headerlink" href="#class-linkspan" title="Permanent link">&para;</a></h4>
<h4 id="class-codeblock"><code>class CodeBlock</code><a class="headerlink" href="#class-codeblock" title="Permanent link">&para;</a></h4>
<h4 id="class-tabledata"><code>class TableData</code><a class="headerlink" href="#class-tabledata" title="Permanent link">&para;</a></h4>
<h4 id="class-markdownir"><code>class MarkdownIR</code><a class="headerlink" href="#class-markdownir" title="Permanent link">&para;</a></h4>
<ul>
<li><code>parse(markdown)</code>
  ‚Äî Parse markdown text into MarkdownIR.</li>
<li><code>render_telegram(ir, table_mode)</code>
  ‚Äî Render IR to Telegram HTML.</li>
<li><code>render_discord(ir, table_mode)</code>
  ‚Äî Render IR to Discord Markdown.</li>
<li><code>render_slack(ir, table_mode)</code>
  ‚Äî Render IR to Slack mrkdwn format.</li>
<li><code>render_plain(ir)</code>
  ‚Äî Render IR as plain text (no formatting).</li>
<li><code>chunk_ir(ir, max_chars)</code>
  ‚Äî Split IR into chunks that don't break style spans.</li>
</ul>
<h3 id="salmalmutilsmigration"><code>salmalm.utils.migration</code><a class="headerlink" href="#salmalmutilsmigration" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Agent Migration ‚Äî Export/Import agent state (Ïù∏Í≤©/Í∏∞Ïñµ/ÏÑ§Ï†ï Ïù¥Îèô).</p>
</blockquote>
<h4 id="class-agentexporter"><code>class AgentExporter</code><a class="headerlink" href="#class-agentexporter" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Export agent state to a ZIP file.</p>
</blockquote>
<ul>
<li><code>export_agent()</code>
  ‚Äî Export agent state to ZIP bytes.</li>
</ul>
<h4 id="class-importresult"><code>class ImportResult</code><a class="headerlink" href="#class-importresult" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Result of an import operation.</p>
</blockquote>
<ul>
<li><code>to_dict()</code>
  ‚Äî To dict.</li>
<li><code>summary()</code>
  ‚Äî Human-readable summary / ÏÇ¨ÎûåÏù¥ ÏùΩÏùÑ Ïàò ÏûàÎäî ÏöîÏïΩ.</li>
</ul>
<h4 id="class-agentimporter"><code>class AgentImporter</code><a class="headerlink" href="#class-agentimporter" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Import agent state from a ZIP file.</p>
</blockquote>
<ul>
<li><code>preview(zip_data)</code>
  ‚Äî Preview what's in the ZIP without importing.</li>
<li>
<p><code>import_agent(zip_data)</code>
  ‚Äî Import agent state from ZIP bytes.</p>
</li>
<li>
<p><code>quick_sync_export()</code>
  ‚Äî Export core agent state as lightweight JSON.</p>
</li>
<li><code>quick_sync_import(data)</code>
  ‚Äî Import core agent state from lightweight JSON.</li>
<li><code>export_agent(include_vault, include_sessions, include_data)</code>
  ‚Äî Export agent state to ZIP bytes. Convenience wrapper.</li>
<li><code>import_agent(zip_data, conflict_mode)</code>
  ‚Äî Import agent state from ZIP bytes. Convenience wrapper.</li>
<li><code>preview_import(zip_data)</code>
  ‚Äî Preview ZIP contents without importing.</li>
<li><code>export_filename()</code>
  ‚Äî Generate export filename with date.</li>
</ul>
<h3 id="salmalmutilsqueue"><code>salmalm.utils.queue</code><a class="headerlink" href="#salmalmutilsqueue" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Message Queue ‚Äî lane-based FIFO with 5 modes, overflow policies, concurrency control.</p>
</blockquote>
<h4 id="class-queuemode_1"><code>class QueueMode</code><a class="headerlink" href="#class-queuemode_1" title="Permanent link">&para;</a></h4>
<h4 id="class-droppolicy"><code>class DropPolicy</code><a class="headerlink" href="#class-droppolicy" title="Permanent link">&para;</a></h4>
<h4 id="class-queuedmessage_1"><code>class QueuedMessage</code><a class="headerlink" href="#class-queuedmessage_1" title="Permanent link">&para;</a></h4>
<h4 id="class-sessionoptions"><code>class SessionOptions</code><a class="headerlink" href="#class-sessionoptions" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Per-session overrides, set via /queue command.</p>
</blockquote>
<h4 id="class-queuelane"><code>class QueueLane</code><a class="headerlink" href="#class-queuelane" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Per-session FIFO lane with serial execution guarantee.</p>
</blockquote>
<ul>
<li><code>async enqueue(message, processor, cfg, channel)</code>
  ‚Äî Main entry: enqueue message, apply mode logic, return result.</li>
<li><code>get_steer_event()</code>
  ‚Äî Get/create the steer event for the current execution.</li>
<li><code>consume_steer()</code>
  ‚Äî Consume a steered message (called at tool boundaries).</li>
<li><code>reset_options()</code>
  ‚Äî Reset per-session overrides to defaults.</li>
</ul>
<h4 id="class-_semaphorecontext"><code>class _SemaphoreContext</code><a class="headerlink" href="#class-_semaphorecontext" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Async context manager for semaphore.</p>
</blockquote>
<h4 id="class-messagequeue_2"><code>class MessageQueue</code><a class="headerlink" href="#class-messagequeue_2" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Global message queue manager with lane-based concurrency control.</p>
</blockquote>
<ul>
<li><code>config()</code>
  ‚Äî Config.</li>
<li><code>reload_config()</code>
  ‚Äî Reload config.</li>
<li><code>async process(session_id, message, processor, channel)</code>
  ‚Äî Process a message through the session's lane.</li>
<li><code>get_lane(session_id)</code>
  ‚Äî Get lane without creating.</li>
<li><code>handle_queue_command(session_id, args)</code>
  ‚Äî Handle /queue command. Returns user-facing response.</li>
<li><code>cleanup(max_idle)</code>
  ‚Äî Remove idle session lanes.</li>
<li><code>active_sessions()</code>
  ‚Äî Active sessions.</li>
<li><code>main_semaphore()</code>
  ‚Äî Main semaphore.</li>
<li>
<p><code>subagent_semaphore()</code>
  ‚Äî Subagent semaphore.</p>
</li>
<li>
<p><code>load_config()</code>
  ‚Äî Load queue config from ~/.salmalm/queue.json, falling back to defaults.</p>
</li>
<li><code>save_config(cfg)</code>
  ‚Äî Persist config to ~/.salmalm/queue.json.</li>
<li><code>apply_overflow(pending, cap, policy)</code>
  ‚Äî Enforce cap on pending list. Returns (trimmed_list, summary_or_none).</li>
</ul>
<h3 id="salmalmutilsretry"><code>salmalm.utils.retry</code><a class="headerlink" href="#salmalmutilsretry" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Retry Policy ‚Äî exponential backoff with jitter.</p>
</blockquote>
<ul>
<li><code>retry_with_backoff(fn)</code>
  ‚Äî Decorator: retry function with exponential backoff + jitter.</li>
<li><code>async async_retry_with_backoff(coro_fn)</code>
  ‚Äî Async version: retry an async callable with exponential backoff.</li>
<li><code>retry_call(fn)</code>
  ‚Äî Functional retry: call fn with retry logic (not a decorator).</li>
</ul>
<h3 id="salmalmutilsshim"><code>salmalm.utils.shim</code><a class="headerlink" href="#salmalmutilsshim" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Shared subpackage proxy shim for backward compatibility.</p>
</blockquote>
<ul>
<li><code>install_shim(package_name, real_module, submodules)</code>
  ‚Äî Install a lazy-loading proxy module for backward compat imports.</li>
</ul>
<h3 id="salmalmutilstls"><code>salmalm.utils.tls</code><a class="headerlink" href="#salmalmutilstls" title="Permanent link">&para;</a></h3>
<ul>
<li><code>ensure_cert(cn, days)</code>
  ‚Äî Generate self-signed certificate if not exists. Returns True if cert exists.</li>
<li><code>create_ssl_context()</code>
  ‚Äî Create SSL context with the server certificate.</li>
<li><code>create_https_server(address, handler_class, ssl_context)</code>
  ‚Äî Create a ThreadingHTTPServer with optional TLS.</li>
<li><code>get_cert_info()</code>
  ‚Äî Get certificate info.</li>
</ul>
<h2 id="web-web-server-websocket-oauth-oauth">web/ ‚Äî Web ‚Äî Server, WebSocket, OAuth / Ïõπ ‚Äî ÏÑúÎ≤Ñ, ÏõπÏÜåÏºì, OAuth<a class="headerlink" href="#web-web-server-websocket-oauth-oauth" title="Permanent link">&para;</a></h2>
<h3 id="salmalmwebasgi"><code>salmalm.web.asgi</code><a class="headerlink" href="#salmalmwebasgi" title="Permanent link">&para;</a></h3>
<blockquote>
<p>ASGI application ‚Äî FastAPI + uvicorn transport layer.</p>
</blockquote>
<h4 id="class-_jsonresp"><code>class _JSONResp</code><a class="headerlink" href="#class-_jsonresp" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Signals a JSON response ‚Äî inherits BaseException so that</p>
</blockquote>
<h4 id="class-_htmlresp"><code>class _HTMLResp</code><a class="headerlink" href="#class-_htmlresp" title="Permanent link">&para;</a></h4>
<h4 id="class-_rawresp"><code>class _RawResp</code><a class="headerlink" href="#class-_rawresp" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Raw bytes response (SVG, JS, etc.).</p>
</blockquote>
<h4 id="class-_ssequeue"><code>class _SSEQueue</code><a class="headerlink" href="#class-_ssequeue" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Bridges sync wfile.write() calls into an async StreamingResponse.</p>
</blockquote>
<ul>
<li><code>write(data)</code></li>
<li><code>flush()</code></li>
<li><code>close()</code>
  ‚Äî Signal generator to stop.</li>
</ul>
<h4 id="class-_ciheaders"><code>class _CIHeaders</code><a class="headerlink" href="#class-_ciheaders" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Case-insensitive header lookup (mirrors http.server.BaseHTTPRequestHandler.headers).</p>
</blockquote>
<ul>
<li><code>get(key, default)</code></li>
</ul>
<h4 id="class-fasthandler"><code>class FastHandler</code><a class="headerlink" href="#class-fasthandler" title="Permanent link">&para;</a></h4>
<blockquote>
<p>ASGI-compatible handler that mimics BaseHTTPRequestHandler interface.</p>
</blockquote>
<ul>
<li><code>send_error(code, message)</code></li>
<li><code>log_message()</code></li>
<li><code>log_error()</code></li>
<li><code>send_response(status)</code></li>
<li><code>send_header(key, value)</code></li>
<li><code>end_headers()</code></li>
<li>
<p><code>wfile()</code></p>
</li>
<li>
<p><code>create_asgi_app()</code>
  ‚Äî Build and return the FastAPI ASGI application.</p>
</li>
</ul>
<h3 id="salmalmwebauth"><code>salmalm.web.auth</code><a class="headerlink" href="#salmalmwebauth" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Auth ‚Äî Multi-user authentication, session isolation, RBAC, rate limiting.</p>
</blockquote>
<h4 id="class-tokenmanager"><code>class TokenManager</code><a class="headerlink" href="#class-tokenmanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Token creation/verification using HMAC-SHA256 with jti revocation support.</p>
</blockquote>
<ul>
<li><code>rotate()</code>
  ‚Äî Create a new signing key. Old keys kept for verification.</li>
<li><code>create(payload, expires_in)</code>
  ‚Äî Create a signed token with unique jti + kid. Default expiry: 24h.</li>
<li><code>verify(token)</code>
  ‚Äî Verify token signature, expiry, and revocation status.</li>
<li><code>revoke(token)</code>
  ‚Äî Revoke a token by its jti. Returns True if successfully revoked.</li>
<li><code>revoke_all_for_user(user_id)</code>
  ‚Äî Rotate the secret to invalidate ALL tokens. Nuclear option.</li>
<li><code>cleanup_expired()</code>
  ‚Äî Remove revocation entries for tokens that have expired anyway.</li>
</ul>
<h4 id="class-ratelimitexceeded"><code>class RateLimitExceeded</code><a class="headerlink" href="#class-ratelimitexceeded" title="Permanent link">&para;</a></h4>
<h4 id="class-ratelimiter"><code>class RateLimiter</code><a class="headerlink" href="#class-ratelimiter" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Token bucket rate limiter per key (user_id or IP).</p>
</blockquote>
<ul>
<li><code>check(key, role)</code>
  ‚Äî Check rate limit. Raises RateLimitExceeded if exceeded.</li>
<li><code>get_remaining(key)</code>
  ‚Äî Get remaining requests allowed in the current rate limit window.</li>
<li><code>cleanup()</code>
  ‚Äî Remove stale buckets (&gt;1h inactive).</li>
</ul>
<h4 id="class-authmanager"><code>class AuthManager</code><a class="headerlink" href="#class-authmanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Multi-user authentication with SQLite backend.</p>
</blockquote>
<ul>
<li><code>create_user(username, password, role)</code>
  ‚Äî Create a new user. Returns user info.</li>
<li><code>authenticate(username, password)</code>
  ‚Äî Authenticate user. Returns user dict or None.</li>
<li><code>authenticate_api_key(api_key)</code>
  ‚Äî Authenticate via API key (constant-time hash comparison).</li>
<li><code>create_token(user, expires_in)</code>
  ‚Äî Create auth token for authenticated user.</li>
<li><code>verify_token(token)</code>
  ‚Äî Verify auth token. Returns user info or None.</li>
<li><code>revoke_token(token)</code>
  ‚Äî Revoke a token (logout). Returns True on success.</li>
<li><code>list_users()</code>
  ‚Äî List all users (admin only).</li>
<li><code>delete_user(username)</code>
  ‚Äî Delete a user account by username.</li>
<li><code>change_password(username, new_password)</code>
  ‚Äî Change a user password. Returns True on success.</li>
<li>
<p><code>has_permission(user, action)</code>
  ‚Äî Check if user has permission for action.</p>
</li>
<li>
<p><code>extract_auth(headers)</code>
  ‚Äî Extract user from headers. Accepts dict (case-sensitive) or HTTPMessage (case-insensitive).</p>
</li>
</ul>
<h3 id="salmalmwebmiddleware"><code>salmalm.web.middleware</code><a class="headerlink" href="#salmalmwebmiddleware" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Request middleware chain ‚Äî auth, audit, rate limiting for all routes.</p>
</blockquote>
<h4 id="class-routepolicy"><code>class RoutePolicy</code><a class="headerlink" href="#class-routepolicy" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Security policy for a single route.</p>
</blockquote>
<ul>
<li><code>get_route_policy(path, method)</code>
  ‚Äî Get security policy for a route. Returns sensible defaults.</li>
<li><code>register_route_policy(path, policy)</code>
  ‚Äî Register custom security policy for a route.</li>
<li><code>check_external_exposure_safety(bind_addr, handler)</code>
  ‚Äî When binding to 0.0.0.0, verify safety requirements are met.</li>
<li><code>get_tool_tier(tool_name)</code>
  ‚Äî Get risk tier for a tool: 'critical', 'high', or 'normal'.</li>
<li><code>is_tool_allowed_external(tool_name, is_authenticated, bind_addr)</code>
  ‚Äî Check if a tool can be used given current context.</li>
</ul>
<h3 id="salmalmweboauth"><code>salmalm.web.oauth</code><a class="headerlink" href="#salmalmweboauth" title="Permanent link">&para;</a></h3>
<blockquote>
<p>OAuth subscription authentication for Anthropic and OpenAI.</p>
</blockquote>
<h4 id="class-anthropicoauth"><code>class AnthropicOAuth</code><a class="headerlink" href="#class-anthropicoauth" title="Permanent link">&para;</a></h4>
<ul>
<li><code>get_auth_url(redirect_uri, state)</code>
  ‚Äî Get auth url.</li>
<li><code>exchange_code(code, redirect_uri)</code>
  ‚Äî Exchange code.</li>
<li><code>refresh_token(refresh_token)</code>
  ‚Äî Refresh token.</li>
<li><code>is_expired(token_data)</code>
  ‚Äî Is expired.</li>
<li><code>is_expiring_soon(token_data, threshold)</code>
  ‚Äî Is expiring soon.</li>
<li><code>auto_refresh(token_data)</code>
  ‚Äî Auto refresh.</li>
</ul>
<h4 id="class-openaioauth"><code>class OpenAIOAuth</code><a class="headerlink" href="#class-openaioauth" title="Permanent link">&para;</a></h4>
<ul>
<li><code>get_auth_url(redirect_uri, state)</code>
  ‚Äî Get auth url.</li>
<li><code>exchange_code(code, redirect_uri)</code>
  ‚Äî Exchange code.</li>
<li><code>refresh_token(refresh_token)</code>
  ‚Äî Refresh token.</li>
<li><code>is_expired(token_data)</code>
  ‚Äî Is expired.</li>
</ul>
<h4 id="class-oauthmanager"><code>class OAuthManager</code><a class="headerlink" href="#class-oauthmanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Manages OAuth tokens for multiple providers.</p>
</blockquote>
<ul>
<li><code>setup(provider, redirect_uri)</code>
  ‚Äî Setup.</li>
<li><code>handle_callback(code, state, redirect_uri)</code>
  ‚Äî Handle callback.</li>
<li><code>status()</code>
  ‚Äî Status.</li>
<li><code>revoke(provider)</code>
  ‚Äî Revoke.</li>
<li><code>refresh(provider)</code>
  ‚Äî Refresh.</li>
<li><code>get_token(provider)</code>
  ‚Äî Get access token for provider, auto-refreshing if needed.</li>
<li><code>get_api_status()</code>
  ‚Äî Return status dict for /api/oauth/status.</li>
</ul>
<h3 id="salmalmwebtemplates"><code>salmalm.web.templates</code><a class="headerlink" href="#salmalmwebtemplates" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm HTML templates ‚Äî thin loader over static/ files.</p>
</blockquote>
<h3 id="salmalmwebweb"><code>salmalm.web.web</code><a class="headerlink" href="#salmalmwebweb" title="Permanent link">&para;</a></h3>
<blockquote>
<p>SalmAlm Web UI ‚Äî HTML + WebHandler.</p>
</blockquote>
<h4 id="class-webhandler"><code>class WebHandler</code><a class="headerlink" href="#class-webhandler" title="Permanent link">&para;</a></h4>
<blockquote>
<p>HTTP handler for web UI and API.</p>
</blockquote>
<ul>
<li><code>log_message(format)</code>
  ‚Äî Suppress default HTTP stderr logging ‚Äî requests logged via salmalm logger in each handler.</li>
<li><code>do_PUT()</code>
  ‚Äî Handle HTTP PUT requests.</li>
<li><code>do_OPTIONS()</code>
  ‚Äî Handle CORS preflight requests.</li>
<li><code>do_GET()</code>
  ‚Äî Handle HTTP GET requests.</li>
<li><code>do_POST()</code>
  ‚Äî Handle HTTP POST requests.</li>
</ul>
<h3 id="salmalmwebws"><code>salmalm.web.ws</code><a class="headerlink" href="#salmalmwebws" title="Permanent link">&para;</a></h3>
<h4 id="class-wsclient"><code>class WSClient</code><a class="headerlink" href="#class-wsclient" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Represents a single WebSocket connection.</p>
</blockquote>
<ul>
<li><code>async send_json(data)</code>
  ‚Äî Send a JSON message as a WebSocket text frame.</li>
<li><code>async send_text(text)</code>
  ‚Äî Send a text message to a connected WebSocket client.</li>
<li><code>async recv_frame()</code>
  ‚Äî Read one WebSocket frame. Returns (opcode, payload) or None on close.</li>
<li><code>async close(code, reason)</code>
  ‚Äî Send close frame and close connection.</li>
</ul>
<h4 id="class-websocketserver"><code>class WebSocketServer</code><a class="headerlink" href="#class-websocketserver" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Async WebSocket server that handles upgrade from raw TCP.</p>
</blockquote>
<ul>
<li><code>on_message(fn)</code>
  ‚Äî Handle an incoming WebSocket message.</li>
<li><code>on_connect(fn)</code>
  ‚Äî Handle a new WebSocket client connection.</li>
<li><code>on_disconnect(fn)</code>
  ‚Äî Handle a WebSocket client disconnection.</li>
<li><code>async start()</code>
  ‚Äî Start listening for WebSocket connections.</li>
<li><code>async shutdown()</code>
  ‚Äî Graceful shutdown: notify clients with shutdown message, then close.</li>
<li><code>async stop()</code>
  ‚Äî Stop the WebSocket server (alias for shutdown).</li>
<li><code>async broadcast(data, session_id)</code>
  ‚Äî Send to all connected clients (or filtered by session).</li>
<li><code>client_count()</code>
  ‚Äî Get the number of connected WebSocket clients.</li>
</ul>
<h4 id="class-streamingresponse"><code>class StreamingResponse</code><a class="headerlink" href="#class-streamingresponse" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Helper to stream LLM response chunks to a WS client.</p>
</blockquote>
<ul>
<li><code>async send_chunk(text)</code>
  ‚Äî Send a text chunk (partial response).</li>
<li><code>async send_tool_call(tool_name, tool_input, result)</code>
  ‚Äî Notify client about a tool call.</li>
<li><code>async send_thinking(text)</code>
  ‚Äî Send thinking/reasoning chunk.</li>
<li><code>async send_done(full_text)</code>
  ‚Äî Signal completion.</li>
<li><code>async send_error(error)</code>
  ‚Äî Send an error message to a WebSocket client.</li>
</ul>
<h2 id="salmalm-top-level-modules">salmalm/ ‚Äî Top-level Modules / ÏµúÏÉÅÏúÑ Î™®Îìà<a class="headerlink" href="#salmalm-top-level-modules" title="Permanent link">&para;</a></h2>
<h3 id="salmalmbootstrap"><code>salmalm.bootstrap</code><a class="headerlink" href="#salmalmbootstrap" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Server bootstrap ‚Äî start all SalmAlm services.</p>
</blockquote>
<ul>
<li><code>async run_server()</code>
  ‚Äî Main async entry point ‚Äî boot all services.</li>
</ul>
<h3 id="salmalmcli"><code>salmalm.cli</code><a class="headerlink" href="#salmalmcli" title="Permanent link">&para;</a></h3>
<blockquote>
<p>CLI argument parsing for SalmAlm.</p>
</blockquote>
<ul>
<li><code>setup_workdir()</code>
  ‚Äî Set working directory and load .env.</li>
<li><code>dispatch_cli()</code>
  ‚Äî Handle CLI flags. Returns True if a flag was handled (caller should exit).</li>
</ul>
<h3 id="salmalmconfig_manager"><code>salmalm.config_manager</code><a class="headerlink" href="#salmalmconfig_manager" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Centralized configuration manager for SalmAlm.</p>
</blockquote>
<h4 id="class-configmanager"><code>class ConfigManager</code><a class="headerlink" href="#class-configmanager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Ï§ëÏïôÏßëÏ§ë ÏÑ§Ï†ï Í¥ÄÎ¶¨Ïûê.</p>
</blockquote>
<ul>
<li><code>load(cls, name, defaults)</code>
  ‚Äî ÏÑ§Ï†ï ÌååÏùº Î°úÎìú. name='mood' ‚Üí ~/.salmalm/mood.json</li>
<li><code>save(cls, name, config)</code>
  ‚Äî ÏÑ§Ï†ï ÌååÏùº Ï†ÄÏû•.</li>
<li><code>resolve(cls, name, key, default)</code>
  ‚Äî Resolve a single config value with full priority chain.</li>
<li><code>get(cls, name, key, default)</code>
  ‚Äî Îã®Ïùº ÌÇ§ Ï°∞Ìöå (resolve ÏÇ¨Ïö©).</li>
<li><code>set(cls, name, key, value)</code>
  ‚Äî Îã®Ïùº ÌÇ§ ÏÑ§Ï†ï.</li>
<li><code>exists(cls, name)</code>
  ‚Äî Exists.</li>
<li><code>delete(cls, name)</code>
  ‚Äî Delete.</li>
<li><code>list_configs(cls)</code>
  ‚Äî Î™®Îì† ÏÑ§Ï†ï ÌååÏùº Î™©Î°ù.</li>
<li>
<p><code>migrate(cls, name)</code>
  ‚Äî ÏÑ§Ï†ï ÌååÏùº ÎßàÏù¥Í∑∏Î†àÏù¥ÏÖò Ïã§Ìñâ.</p>
</li>
<li>
<p><code>set_cli_overrides(overrides)</code>
  ‚Äî Set CLI argument overrides (called at startup).</p>
</li>
</ul>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/hyunjun6928-netizen/salmalm" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/project/salmalm/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 444.7a20.4 20.4 0 1 1 0-40.7 20.4 20.4 0 1 1 0 40.7M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.6-183.4a20.4 20.4 0 1 1 0 40.8 20.4 20.4 0 1 1 0-40.8"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>